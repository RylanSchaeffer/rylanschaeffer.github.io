/*1461679302,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["109Ki"]); }

__d('BlobFactory',['emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=void 0,i=void 0;function j(){try{new b.Blob();i=true;}catch(l){i=false;}}var k=b.BlobBuilder||b.WebKitBlobBuilder||b.MozBlobBuilder||b.MSBlobBuilder;if(b.Blob){h={getBlob:function(l,m){l=l||[];m=m||{};if(i===undefined)j();if(i){return new b.Blob(l,m);}else{var n=new k();for(var o=0;o<l.length;o++)n.append(l[o]);return n.getBlob(m.type);}},isSupported:c('emptyFunction').thatReturnsTrue};}else h={getBlob:function(){},isSupported:c('emptyFunction').thatReturnsFalse};f.exports=h;},null);
__d('CacheStorage',['ErrorUtils','EventListener','ExecutionEnvironment','FBJSON','WebStorage'],function a(b,c,d,e,f,g){var h,i,j,k;if(c.__markCompiled)c.__markCompiled();var l={memory:s,localstorage:q,sessionstorage:r},m='_@_',n='3b',o='CacheStorageVersion';function p(u){'use strict';this._store=u;}p.prototype.getStore=function(){'use strict';return this._store;};p.prototype.keys=function(){'use strict';var u=[];for(var v=0;v<this._store.length;v++)u.push(this._store.key(v));return u;};p.prototype.get=function(u){'use strict';return this._store.getItem(u);};p.prototype.set=function(u,v){'use strict';this._store.setItem(u,v);};p.prototype.remove=function(u){'use strict';this._store.removeItem(u);};p.prototype.clear=function(){'use strict';this._store.clear();};h=babelHelpers.inherits(q,p);i=h&&h.prototype;function q(){'use strict';i.constructor.call(this,c('WebStorage').getLocalStorage());}q.available=function(){'use strict';return !!c('WebStorage').getLocalStorage();};j=babelHelpers.inherits(r,p);k=j&&j.prototype;function r(){'use strict';k.constructor.call(this,c('WebStorage').getSessionStorage());}r.available=function(){'use strict';return !!c('WebStorage').getSessionStorage();};function s(){'use strict';this._store={};}s.prototype.getStore=function(){'use strict';return this._store;};s.prototype.keys=function(){'use strict';return Object.keys(this._store);};s.prototype.get=function(u){'use strict';if(this._store[u]===undefined)return null;return this._store[u];};s.prototype.set=function(u,v){'use strict';this._store[u]=v;};s.prototype.remove=function(u){'use strict';if(u in this._store)delete this._store[u];};s.prototype.clear=function(){'use strict';this._store={};};s.available=function(){'use strict';return true;};function t(u,v){'use strict';this._key_prefix=v||'_cs_';if(u=='AUTO'||!u)for(var w in l){var x=l[w];if(x.available()){u=w;break;}}if(u)if(!l[u]||!l[u].available()){c('ExecutionEnvironment').canUseDOM;this._backend=new s();}else this._backend=new l[u]();var y=this.useBrowserStorage();if(y)c('EventListener').listen(window,'storage',this._onBrowserValueChanged.bind(this));var z=y?this._backend.getStore().getItem(o):this._backend.getStore()[o];if(z!==n)this.clear();}t.prototype.useBrowserStorage=function(){'use strict';return this._backend.getStore()===c('WebStorage').getLocalStorage()||this._backend.getStore()===c('WebStorage').getSessionStorage();};t.prototype.addValueChangeCallback=function(u){'use strict';this._changeCallbacks=this._changeCallbacks||[];this._changeCallbacks.push(u);return {remove:function(){this._changeCallbacks.slice(this._changeCallbacks.indexOf(u),1);}.bind(this)};};t.prototype._onBrowserValueChanged=function(u){'use strict';if(this._changeCallbacks&&String(u.key).startsWith(this._key_prefix))this._changeCallbacks.forEach(function(v){v(u.key,u.oldValue,u.newValue);});};t.prototype.keys=function(){'use strict';var u=[];c('ErrorUtils').guard(function(){if(this._backend){var v=this._backend.keys(),w=this._key_prefix.length;for(var x=0;x<v.length;x++)if(v[x].substr(0,w)==this._key_prefix)u.push(v[x].substr(w));}}.bind(this),'CacheStorage')();return u;};t.prototype.set=function(u,v,w){'use strict';if(this._backend){var x;if(typeof v=='string'){x=m+v;}else if(!w){x={__t:Date.now(),__v:v};x=c('FBJSON').stringify(x);}else x=c('FBJSON').stringify(v);var y=this._backend,z=this._key_prefix+u,aa=true;while(aa)try{y.set(z,x);aa=false;}catch(ba){var ca=y.keys().length;this._evictCacheEntries();aa=y.keys().length<ca;}}};t.prototype._evictCacheEntries=function(){'use strict';var u=[],v=this._backend;v.keys().forEach(function(x){if(x===o)return;var y=v.get(x);if(y===undefined){v.remove(x);return;}if(t._hasMagicPrefix(y))return;try{y=c('FBJSON').parse(y,f.id);}catch(z){v.remove(x);return;}if(y&&y.__t!==undefined&&y.__v!==undefined)u.push([x,y.__t]);});u.sort(function(x,y){return x[1]-y[1];});for(var w=0;w<Math.ceil(u.length/2);w++)v.remove(u[w][0]);};t.prototype.get=function(u,v){'use strict';var w;if(this._backend){c('ErrorUtils').applyWithGuard(function(){w=this._backend.get(this._key_prefix+u);},this,null,function(){w=null;},'CacheStorage:get');if(w!==null){if(t._hasMagicPrefix(w)){w=w.substr(m.length);}else try{w=c('FBJSON').parse(w,f.id);if(w&&w.__t!==undefined&&w.__v!==undefined)w=w.__v;}catch(x){w=undefined;}}else w=undefined;}if(w===undefined&&v!==undefined){w=v;this.set(u,w);}return w;};t.prototype.remove=function(u){'use strict';if(this._backend)c('ErrorUtils').applyWithGuard(this._backend.remove,this._backend,[this._key_prefix+u],null,'CacheStorage:remove');};t.prototype.clear=function(){'use strict';if(this._backend){c('ErrorUtils').applyWithGuard(this._backend.clear,this._backend,null,null,null,'CacheStorage:clear');if(this.useBrowserStorage()){this._backend.getStore().setItem(o,n);}else this._backend.getStore()[o]=n;}};t.getAllStorageTypes=function(){'use strict';return Object.keys(l);};t._hasMagicPrefix=function(u){'use strict';return u.substr(0,m.length)===m;};f.exports=t;},null);
__d("Shaka",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();var h={};(function(i){var j,k=this;function l(yl,zl){var am=yl.split("."),bm=k;am[0] in bm||!bm.execScript||bm.execScript("var "+am[0]);for(var cm;am.length&&(cm=am.shift());)am.length||void 0===zl?bm[cm]?bm=bm[cm]:bm=bm[cm]={}:bm[cm]=zl;}function m(yl,zl){function am(){}am.prototype=zl.prototype;yl.Rb=zl.prototype;yl.prototype=new am();yl.prototype.constructor=yl;yl.Qb=function(bm,cm,dm){return zl.prototype[cm].apply(bm,Array.prototype.slice.call(arguments,2));};}function n(){}function o(yl){var zl=console[yl];zl?zl.bind||(console[yl]=function(){zl.apply(console,arguments);}):console[yl]=function(){};}o("error");o("warn");o("info");o("log");o("debug");function p(yl){t[yl]={ha:s(),end:NaN};}function q(yl){if(yl=t[yl])yl.end=s();}function r(yl){return (yl=t[yl])&&yl.end?yl.end-yl.ha:NaN;}var s=i.performance&&i.performance.now?i.performance.now.bind(i.performance):Date.now,t={};function u(yl,zl,am,bm){this.id=yl;this.bandwidth=zl||0;this.lang=am||"unknown";this.streamInfoID=bm;this.active=false;}l("shaka.player.AudioTrack.compare",function(yl,zl){return yl.lang<zl.lang?-1:yl.lang>zl.lang?1:yl.bandwidth<zl.bandwidth?-1:yl.bandwidth>zl.bandwidth?1:0;});function v(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null;}v.prototype.clone=function(){var yl=new v();yl.maxHeight=this.maxHeight;yl.minHeight=this.minHeight;yl.maxWidth=this.maxWidth;yl.maxBandwidth=this.maxBandwidth;yl.minBandwidth=this.minBandwidth;return yl;};function w(){this.fontSize="100%";this.fontColor=z;this.fontOpacity=ba;this.backgroundColor=aa;this.backgroundOpacity=ba;this.fontEdge=ca;}l("shaka.player.TextStyle",w);function x(yl){var zl=[];zl.push("font-size: "+yl.fontSize);zl.push("color: "+y(yl.fontColor,yl.fontOpacity));zl.push("background-color: "+y(yl.backgroundColor,yl.backgroundOpacity));for(var am=[],bm=0;bm<yl.fontEdge.length;++bm){var cm=yl.fontEdge[bm].slice(3,6);am.push(y(yl.fontEdge[bm].slice(0,3),yl.fontOpacity)+" "+cm.join("px ")+"px");}zl.push("text-shadow: "+am.join(","));return zl.join("; ");}function y(yl,zl){return "rgba("+yl.concat(zl).join(",")+")";}var z=[255,255,255],aa=[0,0,0];w.StandardColors={WHITE:z,BLACK:aa,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var ba=1;w.StandardOpacities={OPAQUE:ba,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var ca=[];w.EdgeStyles={NONE:ca,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]};function da(yl,zl){this.id=yl;this.lang=zl||"unknown";this.enabled=this.active=false;}l("shaka.player.TextTrack.compare",function(yl,zl){return yl.lang<zl.lang?-1:yl.lang>zl.lang?1:0;});function ea(yl,zl,am,bm,cm,dm,em){this.id=yl;this.bandwidth=zl||0;this.width=am||0;this.height=bm||0;this.streamInfoID=cm;this.fbQualityLabel=dm;this.fbQualityClass=em;this.active=false;}function fa(yl,zl){var am=yl.width*yl.height,bm=zl.width*zl.height;return am<bm?-1:am>bm?1:yl.bandwidth<zl.bandwidth?-1:yl.bandwidth>zl.bandwidth?1:0;}l("shaka.player.VideoTrack.compare",fa);function ga(){var yl="CustomEvent" in i;if(yl)try{new CustomEvent("");}catch(zl){yl=false;}yl||(i.CustomEvent=ha);}l("shaka.polyfill.CustomEvent.install",ga);function ha(yl,zl){var am=document.createEvent("CustomEvent"),bm=zl||{bubbles:false,cancelable:false,detail:null};am.initCustomEvent(yl,!!bm.bubbles,!!bm.cancelable,bm.detail);return am;}function ia(){var yl=Element.prototype;yl.requestFullscreen=yl.requestFullscreen||yl.mozRequestFullScreen||yl.msRequestFullscreen||yl.webkitRequestFullscreen;yl=Document.prototype;yl.exitFullscreen=yl.exitFullscreen||yl.mozCancelFullScreen||yl.msExitFullscreen||yl.webkitExitFullscreen;"fullscreenElement" in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement;}});document.addEventListener("webkitfullscreenchange",ja);document.addEventListener("webkitfullscreenerror",ja);document.addEventListener("mozfullscreenchange",ja);document.addEventListener("mozfullscreenerror",ja);document.addEventListener("MSFullscreenChange",ja);document.addEventListener("MSFullscreenError",ja);}l("shaka.polyfill.Fullscreen.install",ia);function ja(yl){var zl=yl.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),zl=new Event(zl,yl);yl.target.dispatchEvent(zl);}function ka(){return Promise.reject(Error("The key system specified is not supported."));}function la(yl){return null==yl?Promise.resolve():Promise.reject(Error("MediaKeys not supported."));}function ma(){throw new TypeError("Illegal constructor.");}ma.prototype.createSession=function(){};ma.prototype.setServerCertificate=function(){};function na(){throw new TypeError("Illegal constructor.");}na.prototype.getConfiguration=function(){};na.prototype.createMediaKeys=function(){};function oa(yl){this.c=[];this.b=[];this.W=pa;if(yl)try{yl(this.S.bind(this),this.a.bind(this));}catch(zl){this.a(zl);}}var pa=0;function qa(){i.Promise||(i.Promise=oa,i.Promise.resolve=ra,i.Promise.reject=sa,i.Promise.all=ta,i.Promise.race=ua,i.setImmediate?(xa=function(yl){return i.setImmediate(yl);},ya=function(yl){return i.clearImmediate(yl);}):(xa=function(yl){return i.setTimeout(yl,0);},ya=function(yl){return i.clearTimeout(yl);}));}l("shaka.polyfill.Promise.install",qa);function ra(yl){var zl=new oa();zl.S(yl);return zl;}function sa(yl){var zl=new oa();zl.a(yl);return zl;}function ta(yl){function zl(fm,gm,hm){fm.W==pa&&(cm[gm]=hm,bm++,bm==cm.length&&fm.S(cm));}var am=new oa();if(!yl.length)return am.S([]),am;for(var bm=0,cm=Array(yl.length),dm=am.a.bind(am),em=0;em<yl.length;++em)yl[em]&&yl[em].then?yl[em].then(zl.bind(null,am,em),dm):zl(am,em,yl[em]);return am;}function ua(yl){for(var zl=new oa(),am=zl.S.bind(zl),bm=zl.a.bind(zl),cm=0;cm<yl.length;++cm)yl[cm]&&yl[cm].then?yl[cm].then(am,bm):am(yl[cm]);return zl;}oa.prototype.then=function(yl,zl){var am=new oa();switch(this.W){case 1:va(this,am,yl);break;case 2:va(this,am,zl);break;case pa:this.c.push({Fa:am,ya:yl}),this.b.push({Fa:am,ya:zl});}return am;};oa.prototype.then=oa.prototype.then;oa.prototype.catch=function(yl){return this.then(void 0,yl);};oa.prototype["catch"]=oa.prototype.catch;oa.prototype.S=function(yl){if(this.W==pa){this.sa=yl;this.W=1;for(yl=0;yl<this.c.length;++yl)va(this,this.c[yl].Fa,this.c[yl].ya);this.c=[];this.b=[];}};oa.prototype.a=function(yl){if(this.W==pa){this.sa=yl;this.W=2;for(yl=0;yl<this.b.length;++yl)va(this,this.b[yl].Fa,this.b[yl].ya);this.c=[];this.b=[];}};function va(yl,zl,am){ab.push(function(){if(am&&"function"==typeof am){try{var cm=am(this.sa);}catch(bm){zl.a(bm);return;}cm instanceof oa?cm==zl?zl.a(new TypeError("Chaining cycle detected")):cm.then(zl.S.bind(zl),zl.a.bind(zl)):zl.S(cm);}else 1==this.W?zl.S(this.sa):zl.a(this.sa);}.bind(yl));null==za&&(za=xa(wa));}function wa(){for(;ab.length;){null!=za&&(ya(za),za=null);var yl=ab;ab=[];for(var zl=0;zl<yl.length;++zl)yl[zl]();}}function xa(){return 0;}function ya(){}var za=null,ab=[];function bb(){var yl=HTMLVideoElement.prototype;!yl.getVideoPlaybackQuality&&"webkitDroppedFrameCount" in yl&&(yl.getVideoPlaybackQuality=cb);}l("shaka.polyfill.VideoPlaybackQuality.install",bb);function cb(){return {droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0};}function db(yl,zl){for(var am=[],bm=0;bm<yl.length;++bm){for(var cm=false,dm=0;dm<am.length&&!(cm=zl?zl(yl[bm],am[dm]):yl[bm]===am[dm]);++dm);cm||am.push(yl[bm]);}return am;}function eb(){return Date.now()+fb;}var fb=0;function gb(yl){this.b=yl;this.c=0==hb;this.a=0;}var hb=1;function ib(yl){return yl.a<yl.b.byteLength;}function jb(yl){var zl=yl.b.getUint8(yl.a);yl.a+=1;return zl;}function kb(yl){var zl=yl.b.getUint32(yl.a,yl.c);yl.a+=4;return zl;}function lb(yl){var zl,am;yl.c?(zl=yl.b.getUint32(yl.a,true),am=yl.b.getUint32(yl.a+4,true)):(am=yl.b.getUint32(yl.a,false),zl=yl.b.getUint32(yl.a+4,false));if(2097151<am)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");yl.a+=8;return am*Math.pow(2,32)+zl;}function mb(yl){if(yl.a+16>yl.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var zl=new Uint8Array(yl.b.buffer,yl.a,16);yl.a+=16;return zl;}function nb(yl,zl){if(yl.a+zl>yl.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");yl.a+=zl;}function ob(yl){this.b=yl;this.a=new gb(yl);pb||(pb=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]);}var pb;function qb(yl){var zl;zl=rb(yl);if(7<zl.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var am=0,bm=0;bm<zl.length;bm++)am=256*am+zl[bm];zl=am;am=rb(yl);yl:{for(bm=0;bm<pb.length;bm++)if(td(am,pb[bm])){bm=true;break yl;}bm=false;};if(bm){am=yl.b.byteLength-yl.a.a;}else{if(8==am.length&&am[1]&224)throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var bm=am[0]&(1<<8-am.length)-1,cm=1;cm<am.length;cm++)bm=256*bm+am[cm];am=bm;}am=yl.a.a+am<=yl.b.byteLength?am:yl.b.byteLength-yl.a.a;bm=new DataView(yl.b.buffer,yl.b.byteOffset+yl.a.a,am);nb(yl.a,am);return new sb(zl,bm);}function rb(yl){var zl=jb(yl.a),am;for(am=1;8>=am&&!(zl&1<<8-am);am++);if(8<am)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var bm=new Uint8Array(am);bm[0]=zl;for(zl=1;zl<am;zl++)bm[zl]=jb(yl.a);return bm;}function sb(yl,zl){this.id=yl;this.a=zl;}function tb(yl){if(8<yl.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==yl.a.byteLength&&yl.a.getUint8(0)&224)throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var zl=0,am=0;am<yl.a.byteLength;am++)var bm=yl.a.getUint8(am),zl=256*zl+bm;return zl;}var ub={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."};function vb(yl){this.c=Math.exp(Math.log(.5)/yl);this.a=this.b=0;}vb.prototype.sample=function(yl,zl){var am=Math.pow(this.c,yl);this.b=zl*(1-am)+am*this.b;this.a+=yl;};function wb(yl){return yl.b/(1-Math.pow(yl.c,yl.a));}function xb(yl){var zl=new CustomEvent(yl.type,{detail:yl.detail,bubbles:!!yl.bubbles}),am;for(am in yl)am in zl||(zl[am]=yl[am]);return zl;}function yb(yl){return new CustomEvent("error",{detail:yl,bubbles:true});}function zb(yl,zl,am){cc(zl);cc(am);return am==zl||yl>=ac&&am==zl.split("-")[0]||yl>=bc&&am.split("-")[0]==zl.split("-")[0]?true:false;}var ac=1,bc=2;function cc(yl){yl=yl.toLowerCase().split("-");var zl=dc[yl[0]];zl&&(yl[0]=zl);return yl.join("-");}var dc={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function ec(yl){return Object.keys(yl).map(function(zl){return yl[zl];});}function fc(yl,zl){return ic(yl,zl,"boolean");}function gc(yl,zl,am){yl=ic(yl,zl,"number");if(null==yl)return null;if(isNaN(yl)||yl==Number.NEGATIVE_INFINITY||yl==Number.POSITIVE_INFINITY)throw new RangeError("'"+zl+"' must be finite.");if(null!=am&&yl<am)throw new RangeError("'"+zl+"' must be >= "+am);return yl;}function hc(yl,zl){return ic(yl,zl,"string");}function ic(yl,zl,am){yl=yl[zl];if(null==yl)return null;if(typeof yl!=am)throw new TypeError("'"+zl+"' must be a "+am+".");return yl;}function jc(yl,zl,am){yl=yl[zl];if(null==yl)return null;if(!(yl instanceof am))throw new TypeError("'"+zl+"' must be an instance of "+am.name+".");return yl;}function kc(){this.a={};}kc.prototype.push=function(yl,zl){this.a.hasOwnProperty(yl)?this.a[yl].push(zl):this.a[yl]=[zl];};kc.prototype.set=function(yl,zl){this.a[yl]=zl;};kc.prototype.get=function(yl){return (yl=this.a[yl])?yl.slice():null;};function lc(yl){var zl=[],am;for(am in yl.a)zl.push.apply(zl,yl.a[am]);return zl;}function mc(yl,zl,am){if(yl=yl.a[zl])for(zl=0;zl<yl.length;++zl)yl[zl]==am&&(yl.splice(zl,1),--zl);}function nc(yl){var zl=[],am;for(am in yl.a)zl.push(am);return zl;}function oc(){this.a=new kc();}oc.prototype.destroy=function(){qc(this);this.a=null;};function pc(yl,zl,am,bm){zl=new rc(zl,am,bm);yl.a.push(am,zl);}oc.prototype.pa=function(yl,zl){for(var am=this.a.get(zl)||[],bm=0;bm<am.length;++bm){var cm=am[bm];cm.target==yl&&(cm.pa(),mc(this.a,zl,cm));}};function qc(yl){for(var zl=lc(yl.a),am=0;am<zl.length;++am)zl[am].pa();yl.a.a={};}function rc(yl,zl,am){this.target=yl;this.type=zl;this.a=am;this.target.addEventListener(zl,am,false);}rc.prototype.pa=function(){this.target&&(this.target.removeEventListener(this.type,this.a,false),this.a=this.target=null);};function sc(yl){this.ua=new kc();this.G=yl;}l("shaka.util.FakeEventTarget",sc);sc.prototype.addEventListener=function(yl,zl,am){am||this.ua.push(yl,zl);};sc.prototype.removeEventListener=function(yl,zl,am){am||mc(this.ua,yl,zl);};sc.prototype.dispatchEvent=function(yl){yl.hasOwnProperty("srcElement")||(delete yl.srcElement,Object.defineProperty(yl,"srcElement",{get:function(){return null;}}));if(yl.hasOwnProperty("target")){yl.target=this;}else{delete yl.target;var zl=this;Object.defineProperty(yl,"target",{get:function(){return zl;},set:function(bm){zl=bm;}});}if(yl.hasOwnProperty("currentTarget")){yl.currentTarget=null;}else{delete yl.currentTarget;var am=null;Object.defineProperty(yl,"currentTarget",{get:function(){return am;},set:function(bm){am=bm;}});}return tc(this,yl);};function tc(yl,zl){zl.currentTarget=yl;for(var am=yl.ua.get(zl.type)||[],bm=0;bm<am.length;++bm){var cm=am[bm];try{cm.handleEvent?cm.handleEvent(zl):cm.call(yl,zl);}catch(dm){}}yl.G&&zl.bubbles&&tc(yl.G,zl);return zl.defaultPrevented;}function uc(yl){sc.call(this,null);this.a=new vb(3);this.g=new vb(10);this.h=yl||500000;this.f=0;}m(uc,sc);l("shaka.util.EWMABandwidthEstimator",uc);uc.prototype.sample=function(yl,zl){if(!(65536>zl)){yl=Math.max(yl,50);var am=8000*zl/yl,bm=yl/1000;this.a.sample(bm,am);this.g.sample(bm,am);this.dispatchEvent(xb({type:"bandwidth"}));this.f=Date.now();}};uc.prototype.getBandwidth=function(){return .5>this.a.a?this.h:Math.min(wb(this.a),wb(this.g));};uc.prototype.getDataAge=function(){return (Date.now()-this.f)/1000;};uc.prototype.supportsCaching=function(){return false;};function vc(yl,zl,am){uc.call(this,am);this.c=yl||0;this.b=void 0===zl?Infinity:zl;}m(vc,uc);l("shaka.util.EWMACacheBandwidthEstimator",vc);vc.prototype.sample=function(yl,zl){yl<=this.c&&8000*zl/yl>this.b||uc.prototype.sample.call(this,yl,zl);};vc.prototype.supportsCaching=function(){return Infinity!==this.b&&!!this.c;};function wc(){uc.call(this);}m(wc,uc);l("shaka.util.EWMASignedURLBandwidthEstimator",wc);wc.prototype.supportsCaching=function(){return true;};function xc(){var yl,zl,am=new Promise(function(bm,cm){yl=bm;zl=cm;});am.resolve=yl;am.reject=zl;am.destroy=xc.prototype.destroy;return am;}xc.prototype.destroy=function(){this.catch(function(){});var yl=Error("Destroyed!");yl.type="destroy";this.reject(yl);};function yc(yl){yl.split("").reduce(function(zl,am,bm){return zl+(bm&&0==bm%4?" "+am:am);});}function zc(){this.g=new xc();this.f=false;this.a=null;this.b=[];this.c=null;}function ad(yl,zl){if(yl.f)throw Error("Cannot append to a running task!");yl.b.push(zl);}zc.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=true;this.b.unshift(function(){});bd(this,void 0);};zc.prototype.end=function(){this.b.splice(1);};function bd(yl,zl){var am=yl.b[0](zl),bm;am?(bm=am[0],yl.c=am[1]):(bm=Promise.resolve(),yl.c=null);bm.then(dd(yl,function(cm){this.a?(this.b=[],this.c=null,cd(this)):(this.b.shift(),this.b.length?bd(this,cm):(this.g.resolve(cm),this.c=null));})).catch(dd(yl,function(cm){this.b=[];this.c=null;this.a?cd(this):this.g.reject(cm);}));}function cd(yl){var zl=Error("Task aborted.");zl.type="aborted";yl.g.reject(zl);i.setTimeout(function(){this.a.resolve();this.a=null;}.bind(yl),5);}function dd(yl,zl){return zl.bind(yl);}function ed(yl,zl,am){MediaSource.isTypeSupported(zl);zl=yl.addSourceBuffer(zl);this.h=yl;this.c=zl;this.l=am;this.i=new oc();this.v=null;this.b=[];this.u=0;this.f=this.a=null;this.o=0;pc(this.i,this.c,"updateend",this.G.bind(this));}var fd=1/60;ed.prototype.destroy=function(){ld(this).catch(function(){});this.f&&this.f.destroy();this.b=this.a=this.f=null;this.i.destroy();this.h=this.c=this.i=null;};function gd(yl,zl){for(var am=yl.c.buffered,bm=0;bm<am.length;++bm){var cm=am.start(bm)-fd,dm=am.end(bm)+fd;if(zl>=cm&&zl<=dm)return am.end(bm)-zl;}return 0;}function hd(yl,zl){var am=zl.a?zl.a-zl.b:1,bm=new ah();bm.a=3;bm.h=1000*am;bm.c=1000*yl.o;bm.j=yl.v;return bm;}function id(yl,zl,am,bm){if(yl.a)return yl=Error("Cannot fetch ("+yl.j+"): previous operation not complete."),yl.type="stream",Promise.reject(yl);yl.a=new zc();am!=yl.c.timestampOffset&&(yl.c.timestampOffset=am);am=hd(yl,zl);var cm=jh(zl.url,am,yl.l),dm=gh.prototype.f.bind(zl.url),em=0;bm&&ad(yl.a,function(){return [bm.then(function(hm){hm.ja>em&&(em=hm.ja);return nd(this,hm);}.bind(this)),this.g.bind(this)];}.bind(yl));ad(yl.a,dd(yl,function(){return [cm.then(function(hm){hm.ja>em&&(em=hm.ja);this.l.getBandwidth();return nd(this,hm);}.bind(this)),function(){dm();this.g();}.bind(this)];}));var fm=0==yl.c.buffered.length&&0==yl.b.length,gm=null;ad(yl.a,function(){if(0==this.c.buffered.length){var hm=Error("Failed to buffer segment ("+this.j+").");hm.type="stream";return [Promise.reject(hm)];}fm&&(hm=zl.b,gm=this.c.buffered.start(0)-hm);hm=uh(this.b,zl.b);0<=hm?this.b.splice(hm+1,0,zl):this.b.push(zl);}.bind(yl));return md(yl).then(function(){return Promise.resolve({R:gm,pb:em});}.bind(yl));}function jd(yl){if(yl.a)return yl=Error("Cannot clear ("+yl.j+"): previous operation not complete."),yl.type="stream",Promise.reject(yl);yl.a=new zc();ad(yl.a,function(){var zl;zl:if(0==this.c.buffered.length){zl=Promise.resolve();}else{try{this.c.remove(0,this.h.duration);}catch(am){zl=Promise.reject(am);break zl;}this.b=[];zl=this.f=new xc();};return [zl,this.g.bind(this)];}.bind(yl));return md(yl);}function kd(yl,zl){if(yl.a){var am=Error("Cannot clearAfter ("+yl.j+"): previous operation not complete.");am.type="stream";return Promise.reject(am);}yl.a=new zc();ad(yl.a,function(){return [od(this,zl),this.g.bind(this)];}.bind(yl));return md(yl);}function ld(yl){yl.a?(yl=yl.a,yl.a?yl=yl.a:yl.f?(yl.c&&yl.c(),yl.a=new xc(),yl=yl.a):(yl.f=true,yl=Promise.resolve())):yl=Promise.resolve();return yl;}function md(yl){yl.a.start();return yl.a.g.then(dd(yl,function(){this.a=null;})).catch(dd(yl,function(zl){this.a=null;return Promise.reject(zl);}));}function nd(yl,zl){try{yl.c.appendBuffer(zl);}catch(am){return Promise.reject(am);}yl.f=new xc();return yl.f;}function od(yl,zl){if(0==yl.c.buffered.length)return Promise.resolve();var am=uh(yl.b,zl);if(-1==am||am==yl.b.length-1)return Promise.resolve();try{yl.c.remove(yl.b[am+1].b,yl.h.duration);}catch(bm){return Promise.reject(bm);}yl.b=yl.b.slice(0,am+1);yl.f=new xc();return yl.f;}ed.prototype.g=function(){this.f&&"open"==this.h.readyState&&this.c.abort();};ed.prototype.G=function(){this.f&&(this.f.resolve(),this.f=null);};function pd(yl){return String.fromCharCode.apply(null,yl);}l("shaka.util.Uint8ArrayUtils.toString",pd);function qd(yl){for(var zl=new Uint8Array(yl.length),am=0;am<yl.length;++am)zl[am]=yl.charCodeAt(am);return zl;}l("shaka.util.Uint8ArrayUtils.fromString",qd);l("shaka.util.Uint8ArrayUtils.toBase64",function(yl,zl){var am=void 0==zl?true:zl,bm=i.btoa(pd(yl)).replace(/\+/g,"-").replace(/\//g,"_");return am?bm:bm.replace(/=*$/,"");});function rd(yl){return qd(i.atob(yl.replace(/-/g,"+").replace(/_/g,"/")));}l("shaka.util.Uint8ArrayUtils.fromBase64",rd);l("shaka.util.Uint8ArrayUtils.fromHex",function(yl){for(var zl=new Uint8Array(yl.length/2),am=0;am<yl.length;am+=2)zl[am/2]=i.parseInt(yl.substr(am,2),16);return zl;});function sd(yl){for(var zl="",am=0;am<yl.length;++am){var bm=yl[am].toString(16);1==bm.length&&(bm="0"+bm);zl+=bm;}return zl;}l("shaka.util.Uint8ArrayUtils.toHex",sd);function td(yl,zl){if(!yl&&!zl)return true;if(!yl||!zl||yl.length!=zl.length)return false;for(var am=0;am<yl.length;++am)if(yl[am]!=zl[am])return false;return true;}function ud(){this.h=this.a="";this.l=false;this.u=this.o=null;this.i=this.g=false;this.j=this.f="";this.c=null;this.b=[];}function vd(yl,zl){var am=new ud();am.a=yl.a;am.h=yl.h;am.l=yl.l;am.o=yl.o;am.u=yl.u;am.g=yl.g;am.i=yl.i;am.f=yl.f;am.j=yl.j;am.c=yl.c?new Uint8Array(yl.c.buffer):null;wd(am,yl.b);wd(am,zl.b);return am;}function wd(yl,zl){var am=yl.b.concat(zl.map(function(bm){return {initData:new Uint8Array(bm.initData.buffer),initDataType:bm.initDataType};}));yl.b=db(am,xd);}function xd(yl,zl){return yl.initDataType==zl.initDataType&&td(yl.initData,zl.initData);}function yd(yl,zl,am,bm){this.a=[];bm&&this.a.push(bm);}l("shaka.player.DrmSchemeInfo",yd);yd.DistinctiveIdentifier={OPTIONAL:0,REQUIRED:1};yd.PersistentState={OPTIONAL:0,REQUIRED:1};yd.createUnencrypted=function(){return new yd(0,0,0,null);};function zd(yl,zl){try{var bm=new be(yl,zl);return Promise.resolve(bm);}catch(am){return Promise.reject(am);}}function ae(yl){var zl=this.mediaKeys;zl&&zl!=yl&&de(zl,null);delete this.mediaKeys;(this.mediaKeys=yl)&&de(yl,this);return Promise.resolve();}function be(yl,zl){this.a=this.keySystem=yl;var am=true;"org.w3.clearkey"==yl&&(this.a="webkit-org.w3.clearkey",am=false);var bm=false,cm;cm=document.getElementsByTagName("video");cm=cm.length?cm[0]:document.createElement("video");for(var dm=0;dm<zl.length;++dm){var em=zl[dm],fm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:em.initDataTypes,sessionTypes:["temporary"]},gm=false;if(em.audioCapabilities)for(var hm=0;hm<em.audioCapabilities.length;++hm){var im=em.audioCapabilities[hm];im.contentType&&(gm=true,cm.canPlayType(im.contentType.split(";")[0],this.a)&&(fm.audioCapabilities.push(im),bm=true));}if(em.videoCapabilities)for(hm=0;hm<em.videoCapabilities.length;++hm)im=em.videoCapabilities[hm],im.contentType&&(gm=true,cm.canPlayType(im.contentType,this.a)&&(fm.videoCapabilities.push(im),bm=true));gm||(bm=cm.canPlayType("video/mp4",this.a)||cm.canPlayType("video/webm",this.a));"required"==em.persistentState&&(am?(fm.persistentState="required",fm.sessionTypes=["persistent-license"]):bm=false);if(bm){this.b=fm;return;}}am="Unsupported keySystem";if("org.w3.clearkey"==yl||"com.widevine.alpha"==yl)am="None of the requested configurations were supported.";am=Error(am);am.name="NotSupportedError";am.code=DOMException.NOT_SUPPORTED_ERR;throw am;}be.prototype.createMediaKeys=function(){var yl=new ce(this.a);return Promise.resolve(yl);};be.prototype.getConfiguration=function(){return this.b;};function ce(yl){this.g=yl;this.b=null;this.a=new oc();this.c=[];this.f={};}function de(yl,zl){yl.b=zl;qc(yl.a);zl&&(pc(yl.a,zl,"webkitneedkey",yl.Ib.bind(yl)),pc(yl.a,zl,"webkitkeymessage",yl.Hb.bind(yl)),pc(yl.a,zl,"webkitkeyadded",yl.Fb.bind(yl)),pc(yl.a,zl,"webkitkeyerror",yl.Gb.bind(yl)));}j=ce.prototype;j.createSession=function(yl){var zl=yl||"temporary";if("temporary"!=zl&&"persistent-license"!=zl)throw new TypeError("Session type "+yl+" is unsupported on this platform.");yl=this.b||document.createElement("video");yl.src||(yl.src="about:blank");zl=new fe(yl,this.g,zl);this.c.push(zl);return zl;};j.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};j.Ib=function(yl){yl=xb({type:"encrypted",initDataType:"webm",initData:yl.initData});this.b.dispatchEvent(yl);};j.Hb=function(yl){var zl=ee(this,yl.sessionId);zl&&(yl=xb({type:"message",messageType:void 0==zl.keyStatuses.Ca()?"licenserequest":"licenserenewal",message:yl.message}),zl.b&&(zl.b.resolve(),zl.b=null),zl.dispatchEvent(yl));};j.Fb=function(yl){if(yl=ee(this,yl.sessionId))he(yl,"usable"),yl.a&&yl.a.resolve(),yl.a=null;};j.Gb=function(yl){var zl=ee(this,yl.sessionId);if(zl){var am=Error("EME v0.1b key error");am.errorCode=yl.errorCode;am.errorCode.systemCode=yl.systemCode;!yl.sessionId&&zl.b?(am.method="generateRequest",45==yl.systemCode&&(am.message="Unsupported session type."),zl.b.reject(am),zl.b=null):yl.sessionId&&zl.a?(am.method="update",zl.a.reject(am),zl.a=null):(am=yl.systemCode,yl.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?he(zl,"output-restricted"):1==am?he(zl,"expired"):he(zl,"internal-error"));}};function ee(yl,zl){var am=yl.f[zl];return am?am:(am=yl.c.shift())?(am.sessionId=zl,yl.f[zl]=am):null;}function fe(yl,zl,am){sc.call(this,null);this.f=yl;this.h=false;this.a=this.b=null;this.c=zl;this.g=am;this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new ie();}m(fe,sc);function ge(yl,zl,am){if(yl.h)return Promise.reject(Error("The session is already initialized."));yl.h=true;var bm;try{if("persistent-license"==yl.g){if(am){bm=qd("LOAD_SESSION|"+am);}else{var dm=new Uint8Array(zl);bm=qd("PERSISTENT|"+pd(dm));}}else bm=new Uint8Array(zl);}catch(cm){return Promise.reject(cm);}yl.b=new xc();try{yl.f.webkitGenerateKeyRequest(yl.c,bm);}catch(em){if("InvalidStateError"!=em.name)return yl.b=null,Promise.reject(em);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,bm);}catch(fm){this.b.reject(fm),this.b=null;}}.bind(yl),10);}return yl.b;}j=fe.prototype;j.Ka=function(yl,zl){if(this.a){this.a.then(this.Ka.bind(this,yl,zl)).catch(this.Ka.bind(this,yl,zl));}else{this.a=yl;var am,bm;"webkit-org.w3.clearkey"==this.c?(am=pd(new Uint8Array(zl)),bm=JSON.parse(am),"oct"!=bm.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),am=rd(bm.keys[0].k),bm=rd(bm.keys[0].kid)):(am=new Uint8Array(zl),bm=null);try{this.f.webkitAddKey(this.c,am,bm,this.sessionId);}catch(cm){this.a.reject(cm),this.a=null;}}};function he(yl,zl){yl.keyStatuses.Ha(zl);var am=xb({type:"keystatuseschange"});yl.dispatchEvent(am);}j.generateRequest=function(yl,zl){return ge(this,zl,null);};j.load=function(yl){return "persistent-license"==this.g?ge(this,null,yl):Promise.reject(Error("Not a persistent session."));};j.update=function(yl){var zl=new xc();this.Ka(zl,yl);return zl;};j.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId);}this.closed.resolve();return this.closed;};j.remove=function(){return "persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();};function ie(){this.size=0;this.a=void 0;}var je;j=ie.prototype;j.Ha=function(yl){this.size=void 0==yl?0:1;this.a=yl;};j.Ca=function(){return this.a;};j.forEach=function(yl){this.a&&yl(je,this.a);};j.get=function(yl){if(this.has(yl))return this.a;};j.has=function(yl){var zl=je;return this.a&&td(new Uint8Array(yl),new Uint8Array(zl))?true:false;};function ke(yl){this.systemIds=[];this.cencKeyIds=[];this.a=[];yl=new gb(new DataView(yl.buffer));try{for(;ib(yl);){var am=yl.a,bm=kb(yl),cm=kb(yl);1==bm?bm=lb(yl):0==bm&&(bm=yl.b.byteLength-am);if(1886614376!=cm){nb(yl,bm-(yl.a-am));}else{var dm=jb(yl);if(1<dm){nb(yl,bm-(yl.a-am));}else{nb(yl,3);var em=sd(mb(yl)),fm=[];if(0<dm)for(var gm=kb(yl),hm=0;hm<gm;++hm){var im=sd(mb(yl));fm.push(im);}var jm=kb(yl);nb(yl,jm);this.cencKeyIds.push.apply(this.cencKeyIds,fm);this.systemIds.push(em);this.a.push({start:am,end:yl.a-1});yl.a!=am+bm&&nb(yl,bm-(yl.a-am));}}}}catch(zl){}}function le(yl,zl){try{var bm=new me(yl,zl);return Promise.resolve(bm);}catch(am){return Promise.reject(am);}}function me(yl,zl){this.keySystem=yl;for(var am=false,bm=0;bm<zl.length;++bm){var cm=zl[bm],dm={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:cm.initDataTypes,sessionTypes:["temporary"]},em=false;if(cm.audioCapabilities)for(var fm=0;fm<cm.audioCapabilities.length;++fm){var gm=cm.audioCapabilities[fm];if(gm.contentType){var em=true,hm=gm.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,hm)&&(dm.audioCapabilities.push(gm),am=true);}}if(cm.videoCapabilities)for(fm=0;fm<cm.videoCapabilities.length;++fm)gm=cm.videoCapabilities[fm],gm.contentType&&(em=true,hm=gm.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,hm)&&(dm.videoCapabilities.push(gm),am=true));em||(am=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4"));"required"==cm.persistentState&&(dm.persistentState="required",dm.sessionTypes=["persistent-license"]);if(am){this.a=dm;return;}}am=Error("Unsupported keySystem");am.name="NotSupportedError";am.code=DOMException.NOT_SUPPORTED_ERR;throw am;}me.prototype.createMediaKeys=function(){var yl=new oe(this.keySystem);return Promise.resolve(yl);};me.prototype.getConfiguration=function(){return this.a;};function ne(yl){var zl=this.mediaKeys;zl&&zl!=yl&&pe(zl,null);delete this.mediaKeys;return (this.mediaKeys=yl)?pe(yl,this):Promise.resolve();}function oe(yl){this.a=new MSMediaKeys(yl);this.b=new oc();}oe.prototype.createSession=function(yl){if("temporary"!=(yl||"temporary"))throw new TypeError("Session type "+yl+" is unsupported on this platform.");return new qe(this.a);};oe.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."));};function pe(yl,zl){function am(){zl.msSetMediaKeys(bm.a);zl.removeEventListener("loadedmetadata",am);}qc(yl.b);if(!zl)return Promise.resolve();pc(yl.b,zl,"msneedkey",re);var bm=yl;try{return 1<=zl.readyState?zl.msSetMediaKeys(yl.a):zl.addEventListener("loadedmetadata",am),Promise.resolve();}catch(cm){return Promise.reject(cm);}}function qe(yl){sc.call(this,null);this.c=null;this.g=yl;this.b=this.a=null;this.f=new oc();this.sessionId="";this.expiration=NaN;this.closed=new xc();this.keyStatuses=new ue();}m(qe,sc);j=qe.prototype;j.generateRequest=function(yl,zl){this.a=new xc();try{this.c=this.g.createSession("video/mp4",new Uint8Array(zl),null),pc(this.f,this.c,"mskeymessage",this.xb.bind(this)),pc(this.f,this.c,"mskeyadded",this.vb.bind(this)),pc(this.f,this.c,"mskeyerror",this.wb.bind(this)),te(this,"status-pending");}catch(am){this.a.reject(am);}return this.a;};j.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"));};j.update=function(yl){this.b=new xc();try{this.c.update(new Uint8Array(yl));}catch(zl){this.b.reject(zl);}return this.b;};j.close=function(){try{this.c.close(),this.closed.resolve(),qc(this.f);}catch(yl){this.closed.reject(yl);}return this.closed;};j.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"));};function re(yl){var zl=yl.initData;if(zl){var am=new ke(zl);if(1>=am.a.length){yl=zl;}else{var bm=[];for(yl=0;yl<am.a.length;yl++)bm.push(zl.subarray(am.a[yl].start,am.a[yl].end+1));zl=db(bm,se);for(yl=am=0;yl<zl.length;yl++)am+=zl[yl].length;am=new Uint8Array(am);for(yl=bm=0;yl<zl.length;yl++)am.set(zl[yl],bm),bm+=zl[yl].length;yl=am;}}else yl=zl;yl=xb({type:"encrypted",initDataType:"cenc",initData:yl});this.dispatchEvent(yl);}function se(yl,zl){return td(yl,zl);}j.xb=function(yl){this.a&&(this.a.resolve(),this.a=null);yl=xb({type:"message",messageType:void 0==this.keyStatuses.Ca()?"licenserequest":"licenserenewal",message:yl.message.buffer});this.dispatchEvent(yl);};j.vb=function(){this.a?(this.a.resolve(),this.a=null):this.b&&(te(this,"usable"),this.b.resolve(),this.b=null);};j.wb=function(){var yl=Error("EME v20140218 key error");yl.errorCode=this.c.error;if(null!=this.a){this.a.reject(yl),this.a=null;}else if(null!=this.b){this.b.reject(yl),this.b=null;}else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:te(this,"output-not-allowed");default:te(this,"internal-error");}};function te(yl,zl){yl.keyStatuses.Ha(zl);var am=xb({type:"keystatuseschange"});yl.dispatchEvent(am);}function ue(){this.size=0;this.a=void 0;}var ve;j=ue.prototype;j.Ha=function(yl){this.size=void 0==yl?0:1;this.a=yl;};j.Ca=function(){return this.a;};j.forEach=function(yl){this.a&&yl(ve,this.a);};j.get=function(yl){if(this.has(yl))return this.a;};j.has=function(yl){var zl=ve;return this.a&&td(new Uint8Array(yl),new Uint8Array(zl))?true:false;};function we(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(je=(new Uint8Array([0])).buffer,Navigator.prototype.requestMediaKeySystemAccess=zd,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ae,i.MediaKeys=ce,i.MediaKeySystemAccess=be):i.MSMediaKeys?(ve=(new Uint8Array([0])).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ne,i.MediaKeys=oe,i.MediaKeySystemAccess=me,Navigator.prototype.requestMediaKeySystemAccess=le):(Navigator.prototype.requestMediaKeySystemAccess=ka,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=la,i.MediaKeys=ma,i.MediaKeySystemAccess=na));}l("shaka.polyfill.MediaKeys.install",we);l("shaka.polyfill.installAll",function(){ga();ia();bb();qa();we();});var xe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ye(yl){var zl;yl instanceof ye?(ze(this,yl.P),this.X=yl.X,this.N=yl.N,af(this,yl.ia),this.O=yl.O,bf(this,yl.a.clone()),this.V=yl.V):yl&&(zl=String(yl).match(xe))?(ze(this,zl[1]||"",true),this.X=cf(zl[2]||""),this.N=cf(zl[3]||"",true),af(this,zl[4]),this.O=cf(zl[5]||"",true),bf(this,zl[6]||"",true),this.V=cf(zl[7]||"")):this.a=new lf(null);}j=ye.prototype;j.P="";j.X="";j.N="";j.ia=null;j.O="";j.V="";j.toString=function(){var yl=[],zl=this.P;zl&&yl.push(df(zl,ff,true),":");if(zl=this.N){yl.push("//");var am=this.X;am&&yl.push(df(am,ff,true),"@");yl.push(encodeURIComponent(zl).replace(/%25([0-9a-fA-F]{2})/g,"%$1"));zl=this.ia;null!=zl&&yl.push(":",String(zl));}if(zl=this.O)this.N&&"/"!=zl.charAt(0)&&yl.push("/"),yl.push(df(zl,"/"==zl.charAt(0)?hf:gf,true));(zl=this.a.toString())&&yl.push("?",zl);(zl=this.V)&&yl.push("#",df(zl,kf));return yl.join("");};j.resolve=function(yl){var zl=this.clone();"data"===zl.P&&(zl=new ye());var am=!!yl.P;am?ze(zl,yl.P):am=!!yl.X;am?zl.X=yl.X:am=!!yl.N;am?zl.N=yl.N:am=null!=yl.ia;var bm=yl.O;if(am){af(zl,yl.ia);}else if(am=!!yl.O){if("/"!=bm.charAt(0))if(this.N&&!this.O){bm="/"+bm;}else{var cm=zl.O.lastIndexOf("/");-1!=cm&&(bm=zl.O.substr(0,cm+1)+bm);}if(".."==bm||"."==bm){bm="";}else if(-1!=bm.indexOf("./")||-1!=bm.indexOf("/.")){for(var cm=0==bm.lastIndexOf("/",0),bm=bm.split("/"),dm=[],em=0;em<bm.length;){var fm=bm[em++];"."==fm?cm&&em==bm.length&&dm.push(""):".."==fm?((1<dm.length||1==dm.length&&""!=dm[0])&&dm.pop(),cm&&em==bm.length&&dm.push("")):(dm.push(fm),cm=true);}bm=dm.join("/");}}am?zl.O=bm:am=""!==yl.a.toString();am?bf(zl,yl.a.clone()):am=!!yl.V;am&&(zl.V=yl.V);return zl;};j.clone=function(){return new ye(this);};function ze(yl,zl,am){yl.P=am?cf(zl,true):zl;yl.P&&(yl.P=yl.P.replace(/:$/,""));}function af(yl,zl){if(zl){zl=Number(zl);if(isNaN(zl)||0>zl)throw Error("Bad port number "+zl);yl.ia=zl;}else yl.ia=null;}function bf(yl,zl,am){zl instanceof lf?yl.a=zl:(am||(zl=df(zl,jf)),yl.a=new lf(zl));}function cf(yl,zl){return yl?zl?decodeURI(yl):decodeURIComponent(yl):"";}function df(yl,zl,am){return "string"==typeof yl?(yl=encodeURI(yl).replace(zl,ef),am&&(yl=yl.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),yl):null;}function ef(yl){yl=yl.charCodeAt(0);return "%"+(yl>>4&15).toString(16)+(yl&15).toString(16);}var ff=/[#\/\?@]/g,gf=/[\#\?:]/g,hf=/[\#\?]/g,jf=/[\#\?@]/g,kf=/#/g;function lf(yl){this.b=yl||null;}lf.prototype.a=null;lf.prototype.c=null;function mf(yl,zl,am){if(!yl.a&&(yl.a={},yl.c=0,yl.b))for(var bm=yl.b.split("&"),cm=0;cm<bm.length;cm++){var dm=bm[cm].indexOf("="),em=null,fm=null;0<=dm?(em=bm[cm].substring(0,dm),fm=bm[cm].substring(dm+1)):em=bm[cm];em=decodeURIComponent(em.replace(/\+/g," "));fm=fm||"";mf(yl,em,decodeURIComponent(fm.replace(/\+/g," ")));}yl.b=null;(bm=yl.a.hasOwnProperty(zl)&&yl.a[zl])||(yl.a[zl]=bm=[]);bm.push(am);yl.c++;}lf.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return "";var yl=[],zl;for(zl in this.a)for(var am=encodeURIComponent(zl),bm=this.a[zl],cm=0;cm<bm.length;cm++){var dm=am;""!==bm[cm]&&(dm+="="+encodeURIComponent(bm[cm]));yl.push(dm);}return this.b=yl.join("&");};lf.prototype.clone=function(){var yl=new lf();yl.b=this.b;if(this.a){var zl={},am;for(am in this.a)zl[am]=this.a[am].concat();yl.a=zl;yl.c=this.c;}return yl;};function nf(yl,zl,am){yl=(new DOMParser()).parseFromString(yl,"text/xml");if(!yl)return null;zl=zl||[new ye("")];am=am||[new ye("")];return lg({fb:zl,s:am},yl,of);}l("shaka.dash.mpd.parseMpd",nf);function of(){this.id=this.url=null;this.type="static";this.b=this.j=this.s=this.fb=null;this.h=5;this.f=this.c=this.g=null;this.i=1;this.a=[];}function pf(){this.g=this.f=this.c=this.s=this.a=this.start=this.id=null;this.b=[];}function qf(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null;this.c=false;this.h=this.g=this.f=this.s=null;this.j=[];this.a=[];}function rf(){this.value=null;}function sf(){this.contentType=this.lang=this.id=null;}function tf(){this.a=this.b=this.g=this.s=this.fbQualityClass=this.fbQualityLabel=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null;this.c=[];}function uf(){this.b=this.a=this.c=this.f=null;}function vf(){this.parsedPssh=this.psshBox=null;}function wf(){this.url=null;}function xf(){this.url=null;}function yf(){this.s=null;this.h=1;this.c=this.b=this.f=this.a=this.g=null;}yf.prototype.clone=function(){var yl=new yf();yl.s=pg(this.s);yl.h=this.h;yl.g=this.g;yl.a=qg(this.a);yl.f=qg(this.f);yl.b=qg(this.b);yl.c=qg(this.c);return yl;};function zf(){this.a=this.url=null;}zf.prototype.clone=function(){var yl=new zf();yl.url=pg(this.url);yl.a=qg(this.a);return yl;};function ag(){this.a=this.url=null;}ag.prototype.clone=function(){var yl=new ag();yl.url=pg(this.url);yl.a=qg(this.a);return yl;};function bg(){this.s=null;this.a=1;this.c=this.g=null;this.i=0;this.h=null;this.b=[];this.f=null;}bg.prototype.clone=function(){var yl=new bg();yl.s=pg(this.s);yl.a=this.a;yl.g=this.g;yl.c=this.c;yl.i=this.i;yl.h=qg(this.h);yl.b=pg(this.b)||[];yl.f=qg(this.f);return yl;};function cg(){this.a=this.b=null;}cg.prototype.clone=function(){var yl=new cg();yl.b=pg(this.b);yl.a=qg(this.a);return yl;};function dg(){this.a=1;this.b=this.i=null;this.j=0;this.c=this.g=this.f=this.h=null;}dg.prototype.clone=function(){var yl=new dg();yl.a=this.a;yl.i=this.i;yl.b=this.b;yl.j=this.j;yl.h=this.h;yl.f=this.f;yl.g=this.g;yl.c=qg(this.c);return yl;};function eg(){this.a=[];}eg.prototype.clone=function(){var yl=new eg();yl.a=pg(this.a)||[];return yl;};function fg(){this.c=this.a=this.b=null;}fg.prototype.clone=function(){var yl=new fg();yl.b=this.b;yl.a=this.a;yl.c=this.c;return yl;};function gg(yl,zl){this.ha=yl;this.end=zl;}gg.prototype.clone=function(){return new gg(this.ha,this.end);};of.TAG_NAME="MPD";pf.TAG_NAME="Period";qf.TAG_NAME="AdaptationSet";rf.TAG_NAME="Role";sf.TAG_NAME="ContentComponent";tf.TAG_NAME="Representation";uf.TAG_NAME="ContentProtection";vf.TAG_NAME="cenc:pssh";wf.TAG_NAME="BaseURL";xf.TAG_NAME="Location";yf.TAG_NAME="SegmentBase";zf.TAG_NAME="RepresentationIndex";ag.TAG_NAME="Initialization";bg.TAG_NAME="SegmentList";cg.TAG_NAME="SegmentURL";dg.TAG_NAME="SegmentTemplate";eg.TAG_NAME="SegmentTimeline";fg.TAG_NAME="S";of.prototype.parse=function(yl,zl){this.url=yl.fb;this.id=rg(zl,"id",yg);this.type=rg(zl,"type",yg)||"static";this.b=rg(zl,"mediaPresentationDuration",tg);this.h=rg(zl,"minBufferTime",tg,this.h);this.g=rg(zl,"minimumUpdatePeriod",tg,this.g);this.c=rg(zl,"availabilityStartTime",sg,this.c);this.f=rg(zl,"timeShiftBufferDepth",tg,this.f);this.f=null;this.i=rg(zl,"suggestedPresentationDelay",tg,this.i);var am=yl.s,bm=ng(this,zl,wf);this.s=ig(am,bm);if(bm=lg(this,zl,xf))this.j=jg(am,bm.url);this.a=ng(this,zl,pf);};pf.prototype.parse=function(yl,zl){this.id=rg(zl,"id",yg);this.start=rg(zl,"start",tg);this.a=rg(zl,"duration",tg);var am=ng(this,zl,wf);this.s=ig(yl.s,am);this.c=lg(this,zl,yf);this.f=lg(this,zl,bg);this.g=lg(this,zl,dg);this.b=ng(this,zl,qf);hg(this);};function hg(yl){for(var zl=[],am=0;am<yl.b.length;++am){var bm=yl.b[am];null!=bm.group&&(zl[bm.group]=true);}for(am=0;am<yl.b.length;++am)if(bm=yl.b[am],null==bm.group){for(var cm=1;1==zl[cm];)++cm;zl[cm]=true;bm.group=cm;}}qf.prototype.parse=function(yl,zl){var am=lg(this,zl,sf)||{},bm=lg(this,zl,rf);this.id=rg(zl,"id",yg);this.group=rg(zl,"group",xg);this.lang=rg(zl,"lang",yg,am.lang);this.contentType=rg(zl,"contentType",yg,am.contentType);this.width=rg(zl,"width",wg);this.height=rg(zl,"height",wg);this.b=rg(zl,"mimeType",yg);this.i=rg(zl,"codecs",yg);this.c=bm&&"main"==bm.value;this.lang&&(this.lang=cc(this.lang));am=ng(this,zl,wf);this.s=ig(yl.s,am);this.j=ng(this,zl,uf);!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]);this.f=yl.c?kg(this,zl,yl.c):lg(this,zl,yf);this.g=yl.f?kg(this,zl,yl.f):lg(this,zl,bg);this.h=yl.g?kg(this,zl,yl.g):lg(this,zl,dg);this.a=ng(this,zl,tf);!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]));};rf.prototype.parse=function(yl,zl){this.value=rg(zl,"value",yg);};sf.prototype.parse=function(yl,zl){this.id=rg(zl,"id",yg);this.lang=rg(zl,"lang",yg);this.contentType=rg(zl,"contentType",yg);this.lang&&(this.lang=cc(this.lang));};tf.prototype.parse=function(yl,zl){this.id=rg(zl,"id",yg);this.bandwidth=rg(zl,"bandwidth",wg);this.width=rg(zl,"width",wg,yl.width);this.height=rg(zl,"height",wg,yl.height);this.f=rg(zl,"mimeType",yg,yl.b);this.h=rg(zl,"codecs",yg,yl.i);this.fbQualityLabel=rg(zl,"FBQualityLabel",yg);this.fbQualityClass=rg(zl,"FBQualityClass",yg);this.lang=yl.lang;var am=ng(this,zl,wf);this.s=ig(yl.s,am);this.c=ng(this,zl,uf);this.g=yl.f?kg(this,zl,yl.f):lg(this,zl,yf);this.b=yl.g?kg(this,zl,yl.g):lg(this,zl,bg);this.a=yl.h?kg(this,zl,yl.h):lg(this,zl,dg);this.c=this.c.concat(yl.j);};uf.prototype.parse=function(yl,zl){this.f=zl;this.c=rg(zl,"schemeIdUri",yg);var am=rg(zl,"cenc:default_KID",yg);am&&(this.b=am.replace(/[-]/g,""));this.a=lg(this,zl,vf);};vf.prototype.parse=function(yl,zl){var am=og(zl);if(am){this.psshBox=rd(am);try{this.parsedPssh=new ke(this.psshBox);}catch(bm){if(!(bm instanceof RangeError))throw bm;}}};wf.prototype.parse=function(yl,zl){this.url=og(zl);};xf.prototype.parse=function(yl,zl){this.url=og(zl);};yf.prototype.parse=function(yl,zl){this.s=yl.s||this.s;this.h=rg(zl,"timescale",wg,this.h);this.g=rg(zl,"presentationTimeOffset",xg,this.g);this.a=rg(zl,"indexRange",ug,this.a);this.f=rg(zl,"FBFirstSegmentRange",ug,this.f);this.b=lg(this,zl,zf)||this.b;this.c=lg(this,zl,ag)||this.c;};zf.prototype.parse=function(yl,zl){var am=rg(zl,"sourceURL",yg);this.url=jg(yl.s,am);this.a=rg(zl,"range",ug,qg(yl.a));};ag.prototype.parse=function(yl,zl){var am=rg(zl,"sourceURL",yg);this.url=jg(yl.s,am);this.a=rg(zl,"range",ug);};bg.prototype.parse=function(yl,zl){this.s=yl.s||this.s;this.a=rg(zl,"timescale",wg,this.a);this.g=rg(zl,"presentationTimeOffset",xg,this.g);this.c=rg(zl,"duration",wg,this.c);var am=rg(zl,"startNumber",wg);null!=am&&(this.i=am);this.h=lg(this,zl,ag)||this.h;this.b=(am=ng(this,zl,cg))&&0<am.length?am:this.b;this.f=lg(this,zl,eg)||this.f;};cg.prototype.parse=function(yl,zl){var am=rg(zl,"media",yg);this.b=jg(yl.s,am);this.a=rg(zl,"mediaRange",ug);};dg.prototype.parse=function(yl,zl){this.a=rg(zl,"timescale",wg,this.a);this.i=rg(zl,"presentationTimeOffset",xg,this.i);this.b=rg(zl,"duration",wg,this.b);var am=rg(zl,"startNumber",xg);null!=am&&(this.j=am);this.h=rg(zl,"media",yg,this.h);this.f=rg(zl,"index",yg,this.f);this.g=rg(zl,"initialization",yg,this.g);this.c=lg(this,zl,eg)||this.c;};eg.prototype.parse=function(yl,zl){this.a=ng(this,zl,fg);};fg.prototype.parse=function(yl,zl){this.b=rg(zl,"t",xg);this.a=rg(zl,"d",xg);this.c=rg(zl,"r",vg);};function ig(yl,zl){if(!zl||0===zl.length)return yl;for(var am=[],bm=0;bm<zl.length;bm++){var cm=zl[bm].url;null==yl||0===yl.length?am.push(new ye(cm)):(cm=jg(yl.slice(0,1),cm),am.push(cm[0]));}return am;}function jg(yl,zl){if(!zl)return yl;var am=new ye(zl);return yl?yl.map(function(bm){return bm.resolve(am);}):[am];}function kg(yl,zl,am){var bm=qg(am);(zl=mg(zl,am.constructor.TAG_NAME))&&bm.parse(yl,zl);return bm;}function lg(yl,zl,am){var bm=null;if(zl=mg(zl,am.TAG_NAME))bm=new am(),bm.parse(yl,zl);return bm;}function mg(yl,zl){for(var am=null,bm=0;bm<yl.childNodes.length;bm++)if(yl.childNodes[bm].tagName==zl){if(am)return null;am=yl.childNodes[bm];}return am;}function ng(yl,zl,am){for(var bm=[],cm=0;cm<zl.childNodes.length;cm++)if(zl.childNodes[cm].tagName==am.TAG_NAME){var dm=new am();dm.parse.call(dm,yl,zl.childNodes[cm]);bm.push(dm);}return bm;}function og(yl){yl=yl.firstChild;return yl.nodeType!=Node.TEXT_NODE?null:yl.nodeValue;}function pg(yl){return yl?yl.map(function(zl){return zl.clone();}):null;}function qg(yl){return yl?yl.clone():null;}function rg(yl,zl,am,bm){yl=am(yl.getAttribute(zl));return null!=yl?yl:void 0!==bm?bm:null;}function sg(yl){if(!yl)return null;yl=Date.parse(yl);return isNaN(yl)?null:Math.floor(yl/1000);}function tg(yl){if(!yl)return null;var zl=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(yl);if(!zl)return null;yl=0;var am=xg(zl[1]);am&&(yl+=31536000*am);(am=xg(zl[2]))&&(yl+=2592000*am);(am=xg(zl[3]))&&(yl+=86400*am);(am=xg(zl[4]))&&(yl+=3600*am);(am=xg(zl[5]))&&(yl+=60*am);zl=i.parseFloat(zl[6]);(zl=isNaN(zl)?null:zl)&&(yl+=zl);return yl;}function ug(yl){var zl=/([0-9]+)-([0-9]+)/.exec(yl);if(!zl)return null;yl=xg(zl[1]);if(null==yl)return null;zl=xg(zl[2]);return null==zl?null:new gg(yl,zl);}function vg(yl){yl=i.parseInt(yl,10);return isNaN(yl)?null:yl;}function wg(yl){yl=i.parseInt(yl,10);return 0<yl?yl:null;}function xg(yl){yl=i.parseInt(yl,10);return 0<=yl?yl:null;}function yg(yl){return yl;}function zg(yl,zl){this.url=yl;this.b=zl||new ah();this.g=this.j=this.h=0;this.a=null;this.c=new xc();this.f=null;}l("shaka.util.AjaxRequest",zg);function ah(){this.body=null;this.a=1;this.h=1000;this.c=0;this.method="GET";this.f="arraybuffer";this.b={};this.g=this.i=false;this.j=null;}var bh=true;function ch(yl){dh(yl);yl.b.body=null;yl.c.destroy();yl.c=null;yl.f=null;}function dh(yl){yl.a&&(yl.a.onload=null,yl.a.onreadystatechange=null,yl.a.onerror=null,yl.a.ontimeout=null);yl.a=null;}zg.prototype.i=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var yl=this.url.split(":")[1].split(";").pop().split(","),zl=yl.pop(),zl="base64"==yl.pop()?i.atob(zl.replace(/-/g,"+").replace(/_/g,"/")):i.decodeURIComponent(zl);"arraybuffer"==this.b.f&&(zl=qd(zl).buffer);yl=JSON.parse(JSON.stringify(new XMLHttpRequest()));yl.response=zl;yl.responseText=zl.toString();zl=this.c;zl.resolve(yl);ch(this);return zl;}if(0==this.url.lastIndexOf("idb:",0))return this.G();this.h++;this.j=Date.now();this.g||(this.g=this.b.h);this.a=new XMLHttpRequest();yl=this.url;bh&&(this.f&&!this.f.supportsCaching()||this.b.g)&&(yl=new ye(yl),mf(yl.a,"_",Date.now()),yl=yl.toString());this.a.open(this.b.method,yl,true);this.a.responseType=this.b.f;this.a.timeout=this.b.c;this.a.withCredentials=this.b.i;this.a.onload=this.l.bind(this);this.a.onreadystatechange=this.o.bind(this);this.a.onerror=this.v.bind(this);this.a.ontimeout=this.u.bind(this);for(zl in this.b.b)this.a.setRequestHeader(zl,this.b.b[zl]);this.a.send(this.b.body);return this.c;};zg.prototype.send=zg.prototype.i;function eh(yl,zl,am){zl=Error(zl);zl.type=am;zl.status=yl.a.status;zl.url=yl.url;zl.method=yl.b.method;zl.body=yl.b.body;zl.Pb=yl.a;return zl;}zg.prototype.l=function(yl){this.f&&this.f.sample(Date.now()-this.j,yl.loaded);yl=[403];200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),ch(this)):this.h<this.b.a&&-1===yl.indexOf(this.a.status)?fh(this):(yl=eh(this,"HTTP error.","net"),this.c.reject(yl),ch(this));};zg.prototype.o=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED&&(this.a.ja=Date.now()-this.j,this.b.g)){var yl=Date.parse(this.a.getResponseHeader("Date"));yl&&(fb=yl-Date.now());}};zg.prototype.v=function(){var yl=eh(this,"Network failure.","net");this.c.reject(yl);ch(this);};zg.prototype.u=function(){if(this.h<this.b.a){fh(this);}else{var yl=eh(this,"Request timed out.","net");this.c.reject(yl);ch(this);}};function fh(yl){dh(yl);i.setTimeout(yl.i.bind(yl),yl.g*(1+.5*(2*Math.random()-1)));yl.g*=2;}function gh(yl,zl,am,bm){this.b=zl;this.h=am||0;this.g=null!=bm?bm:null;this.c=this.a=null;this.j=yl;this.i=null;}var hh;l("shaka.util.FailoverUri",gh);function ih(yl,zl){return yl&&0!==yl.length?yl.map(function(am){return am.resolve(zl);}):[zl];}gh.setPrefetchCacheValueGetter=function(yl){hh=yl;};function jh(yl,zl,am){if(yl.a)return yl.a;yl.a=kh(yl,0,zl||new ah(),am);return yl.a;}gh.prototype.f=function(){if(this.c){this.a=null;var yl=this.c;if(yl.a&&yl.a.readyState!=XMLHttpRequest.DONE){yl.a.abort();var zl=eh(yl,"Request aborted.","aborted");yl.c.reject(zl);ch(yl);}this.i=this.c=null;}};function kh(yl,zl,am,bm){var cm=yl.b[zl].toString();if(yl.h||yl.g){var dm=yl.b[zl].N;!dm.endsWith("fbcdn.net")||dm.startsWith("interncache")||dm.endsWith("ak.fbcdn.net")?am.b.Range="bytes="+(yl.h+"-"+(null!=yl.g?yl.g:"")):cm+="&bytestart="+yl.h+"&byteend="+yl.g;}yl.j&&(cm=yl.j(cm,am.b)||cm);dm=null;hh&&(dm=hh(cm));dm||(yl.c=new zg(cm,am),bm&&(yl.c.f=bm),dm=yl.c.i());cm=dm.then(dd(yl,function(em){this.i=this.c=this.a=null;this.i=em.a?new ye(em.a):this.b[zl];em.response.ja=em.ja;return Promise.resolve(em.response);}));return cm=cm.catch(dd(yl,function(em){if(this.a&&zl+1<this.b.length)return this.a=kh(this,zl+1,am,bm);this.a=this.c=null;return Promise.reject(em);}));}gh.prototype.clone=function(){return new gh(this.j,this.b.map(function(yl){return yl.clone();}),this.h,this.g);};gh.prototype.toString=function(){return this.b[0].toString();};function lh(yl,zl){this.a=new ah();this.a.f="text";this.a.a=3;this.a.c=1000*(null!=zl?zl:0);this.a.g=true;this.b=yl;}function mh(yl){var zl=yl.b;return jh(zl,yl.a).then(function(am){if(am=nf(am,zl.b,[zl.i]))return Promise.resolve(am);am=Error("MPD parse failure.");am.type="dash";return Promise.reject(am);});}function nh(yl,zl,am,bm){for(var cm=zl.a,dm=[],em=0;em<bm;++em){var fm=em+am,gm=(fm-1)*cm.b,hm=gm/cm.a,im=(gm+cm.b)/cm.a,fm=oh(yl,zl,cm.j+fm-1,gm);if(!fm)return null;dm.push(new sh(hm,im,fm));}return dm;}function oh(yl,zl,am,bm){if(!zl.a)return null;var cm=zl.a.h;if(!cm)return zl.s?new gh(yl,zl.s,0,null):null;am=ph(cm,zl.id,am,zl.bandwidth,bm);if(!am)return null;zl=ih(zl.s,am);return new gh(yl,zl,0,null);}function ph(yl,zl,am,bm,cm){var dm={RepresentationID:zl,Number:am,Bandwidth:bm,Time:cm};yl=yl.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(fm,gm,hm){if("$$"==fm)return "$";var im=dm[gm];if(null==im)return fm;"RepresentationID"==gm&&hm&&(hm=void 0);fm=im.toString();hm=i.parseInt(hm,10)||1;hm=Math.max(0,hm-fm.length);return Array(hm+1).join("0")+fm;});try{return new ye(yl);}catch(em){if(em instanceof URIError)return null;throw em;}}function qh(yl,zl,am){var bm=0;zl*=am;yl=yl.a;am=[];for(var cm=0;cm<yl.length&&yl[cm].a;++cm){var dm=yl[cm].b,dm=null!=dm?dm:bm,em=yl[cm].c||0;0>em&&(em=yl[cm].a,em=cm+1===yl.length?Math.ceil((yl[0].b+zl-dm)/em)-1:Math.ceil((yl[cm+1].b-dm)/em)-1);0<am.length&&dm!=bm&&(am[am.length-1].end=dm);for(var fm=0;fm<=em;++fm)bm=dm+yl[cm].a,am.push({start:dm,end:bm}),dm=bm;}return am;}function rh(yl,zl){this.a=yl;this.b=zl||null;}rh.prototype.destroy=function(){this.a&&(this.a.f(),this.a=null);this.b=null;};rh.prototype.create=function(){return this.a?jh(this.a):Promise.resolve(this.b);};function sh(yl,zl,am){this.b=yl;this.a=zl;this.url=am;}function th(yl,zl,am){return new sh(zl,am,yl.url);}function uh(yl,zl){for(var am=yl.length-1;0<=am;--am){var bm=yl[am];if(zl>=bm.b&&(null==bm.a||zl<bm.a))return am;}return -1;}function vh(yl,zl){return yl.map(function(am){return th(am,am.b+zl,null!=am.a?am.a+zl:null);});}function wh(){}wh.prototype.parse=function(yl,zl,am,bm,cm){var dm=null;try{yl:{var fm=[],gm=new gb(yl),hm=kb(gm);if(1936286840!=kb(gm)){dm=null;}else{1==hm&&(hm=lb(gm));var im=jb(gm);nb(gm,3);nb(gm,4);var jm=kb(gm);if(0==jm){dm=null;}else{var km,lm;0==im?(km=kb(gm),lm=kb(gm)):(km=lb(gm),lm=lb(gm));nb(gm,2);var mm=gm.b.getUint16(gm.a,gm.c);gm.a+=2;yl=km;zl=zl+hm+lm;for(hm=0;hm<mm;hm++){var nm=kb(gm);lm=(nm&2147483648)>>>31;var im=nm&2147483647,om=kb(gm);kb(gm);if(1==lm){dm=null;break yl;}var pm;pm=0==hm&&cm?cm:new gh(bm,am,zl,zl+im-1);fm.push(new sh(yl/jm,(yl+om)/jm,pm));yl+=om;zl+=im;}dm=fm;}}};}catch(em){if(!(em instanceof RangeError))throw em;}return dm;};function xh(yl){this.a=yl;this.v=this.u=this.R=0;}xh.prototype.F=function(){return this.v;};xh.prototype.getConsecutiveUpdatesWithoutChanges=xh.prototype.F;xh.prototype.D=function(){return this.u;};xh.prototype.getConsecutiveUpdatesWithChanges=xh.prototype.D;xh.prototype.destroy=function(){this.a=null;};j=xh.prototype;j.length=function(){return this.a.length;};function yh(yl){if(0==yl.a.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return yl.a[0];}j.w=function(){if(0==this.a.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.a[this.a.length-1];};j.get=function(yl){if(0>yl||yl>=this.a.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.a[yl];};j.la=function(yl){yl=uh(this.a,yl);return 0<=yl?this.a[yl]:null;};j.Ea=function(yl){zh(this,yl);return true;};function zh(yl,zl){yl.R!=zl.R&&(zl=new xh(vh(zl.a,yl.R-zl.R)));if(0==yl.length()){yl.a=zl.a.slice(0);}else if(0!=zl.length()&&null!=yl.w().a&&!(null!=zl.w().a&&zl.w().a<yl.w().a)){if(yl.w().a<=yh(zl).b){var am=th(yl.w(),yl.w().b,yh(zl).b),am=yl.a.slice(0,-1).concat([am]);}else{var bm;for(bm=0;bm<yl.a.length&&!(yl.a[bm].a>=yh(zl).b);++bm);yl.a[bm].b<yh(zl).b?(am=th(yl.a[bm],yl.a[bm].b,yh(zl).b),am=yl.a.slice(0,bm).concat([am])):(yh(yl).b>yh(zl).b||yh(zl),am=yl.a.slice(0,bm));}yl.a=am.concat(zl.a);}}j.ka=function(yl){var zl=yl-this.R;if(0==zl)return 0;this.a=vh(this.a,zl);this.R=yl;return zl;};j.Ba=function(){return 0<this.length()?{start:yh(this).b,end:this.w().a}:{start:0,end:0};};function ai(yl,zl,am,bm){xh.call(this,yl);this.h=zl;this.A=am;this.g=bm;this.i=this.h.b||this.h.a.reduce(function(cm,dm){return null==dm.a?NaN:cm+dm.a;},0)||0;this.b=this.o=this.f=null;bi(this);}m(ai,xh);ai.prototype.destroy=function(){this.A=this.h=null;xh.prototype.destroy.call(this);};ai.prototype.la=function(yl){di(this,eb()/1000);return xh.prototype.la.call(this,yl);};ai.prototype.Ea=function(yl){if(!(yl instanceof ai))return false;zh(this,yl);this.i=Math.max(this.i,yl.i);null==this.f?(this.g=yl.g,bi(this)):ei(this);return true;};function bi(yl){ei(yl);if(0!=yl.length()){yl.length();var zl=null!=yl.w().a?yl.w().a:yl.w().b;if(yl.h.c>yl.g){yl.f=zl;}else{var am=yl.g-(yl.h.c+yl.A.start);0>am?yl.f=zl:am<Math.max(yl.w().b,yl.w().a||0)?(yl.w(),yl.f=zl):yl.f=am;}yl.o=yl.w().b;yl.b=yh(yl).b;}}ai.prototype.ka=function(yl){yl=xh.prototype.ka.call(this,yl);Math.min.apply(null,this.a.filter(function(zl){return null!=zl.a;}).map(function(zl){return zl.a-zl.b;}));null!=this.f&&(this.o+=yl,this.b+=yl,this.f+=yl);return yl;};ai.prototype.Ba=function(){return ci(this,eb()/1000);};function ci(yl,zl){di(yl,zl);if(null==yl.f||null==yl.o||null==yl.b)return {start:0,end:0};var am=Number.POSITIVE_INFINITY;yl.i&&(am=yl.i);var bm=zl-yl.g,cm=yl.f+bm;null!=yl.h.f&&(cm=cm-yl.b-yl.h.f,0<cm&&(yl.b+=cm));yl.b=Math.min(yl.b,am);bm=yl.o+bm;if(bm<yl.b)return {start:yl.b,end:yl.b};bm=0<yl.length()?null!=yl.w().a?Math.min(bm,yl.w().a):bm:yl.b;bm=Math.max(bm,yl.b);bm=Math.min(bm,am);return {start:yl.b,end:bm};}function di(yl,zl){ei(yl);if(null!=yl.h.f)if(null==yl.f){yl.length();}else{for(var am=yl.f+(zl-yl.g),bm=0,cm=0;cm<yl.a.length;++cm){var dm=null;cm<yl.a.length-1?dm=yl.a[cm+1].a:(dm=yl.a[cm],dm=null!=dm.a?dm.a+(dm.a-dm.b):null);if(null!=dm&&dm<am-yl.h.f){++bm;}else break;}0<bm&&yl.a.splice(0,bm);}}function ei(yl){if(yl.i){for(var zl=0,am=yl.a.length-1;0<=am;--am)if(yl.a[am].b>yl.i){++zl;}else break;0<zl&&yl.a.splice(-zl);}}function fi(yl,zl,am,bm,cm){var dm=1,em=0,fm;if(yl.c>bm){fm=null;}else{var gm=yl.i||0,hm=yl.f||0;fm=am.a;fm=fm.b/fm.a;var im=bm-(yl.c+zl.start);0>im?fm=null:(hm=im-2*fm-hm,0>hm&&(hm=0),hm=Math.ceil(hm/fm)*fm,im-=fm,0>im?fm=null:(gm=Math.floor(im/fm)*fm-gm,0>gm&&(gm=0),gm=Math.floor(gm/fm)*fm,fm={Wa:hm/fm+1,current:(gm>=hm?gm:hm)/fm+1}));}fm&&(dm=fm.Wa,em=fm.current-fm.Wa+1);dm=nh(cm,am,dm,em);if(null==dm)throw yl=Error("Failed to generate SegmentReferences."),yl.type="stream",yl;ai.call(this,dm,yl,zl,bm);this.G=am;this.l=this.c=0<this.length()?yl.c+zl.start+this.w().a:null;this.j=fm?fm.current+1:null;this.B=cm;}m(fi,ai);fi.prototype.destroy=function(){this.B=this.G=null;ai.prototype.destroy.call(this);};fi.prototype.la=function(yl){var zl=eb()/1000;gi(this,zl);di(this,zl);return xh.prototype.la.call(this,yl);};fi.prototype.Ea=function(yl){if(null!=this.c||!(yl instanceof fi)||null==yl.c)return false;this.c=yl.c;this.l=yl.l;this.j=yl.j;this.g=yl.g;this.i=yl.i;zh(this,yl);gi(this,eb()/1000);bi(this);return true;};fi.prototype.ka=function(yl){yl=ai.prototype.ka.call(this,yl);null!=this.c&&(this.c+=yl,this.l+=yl);return yl;};fi.prototype.Ba=function(){var yl=eb()/1000;gi(this,yl);return ci(this,yl);};function gi(yl,zl){if(null!=yl.c&&null!=yl.l&&null!=yl.j){var am=yl.G.a,am=am.b/am.a,bm=Math.floor((yl.l+(zl-yl.g)-yl.c)/am);if(0!=bm){var cm=nh(yl.B,yl.G,yl.j,bm);Array.prototype.push.apply(yl.a,vh(cm,yl.R));yl.c+=bm*am;yl.j+=bm;}}}function hi(yl,zl,am,bm,cm){this.f=yl;this.b=zl;this.c=am;this.h=bm;this.a=null;this.g=cm;}hi.prototype.destroy=function(){this.g=this.c=this.b=this.f=null;this.a&&(this.a.destroy(),this.a=null);};hi.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.f.type){try{this.a=new fi(this.f,this.b,this.c,this.h,this.g);}catch(yl){return Promise.reject(yl);}}else{var zl;zl=this.c.a;if(zl=nh(this.g,this.c,1,Math.ceil(this.b.a/(zl.b/zl.a)))){if(0<zl.length){var am=zl[zl.length-1];zl[zl.length-1]=th(am,am.b,this.b.a);}zl=new xh(zl);}else zl=null;this.a=zl;if(!this.a)return zl=Error("Failed to generate SegmentReferences"),zl.type="stream",Promise.reject(zl);}return Promise.resolve(this.a);};function ii(yl,zl,am,bm,cm){this.c=yl;this.b=zl;this.g=am;this.a=null;this.h=bm;this.f=cm;}ii.prototype.destroy=function(){this.f=this.g=this.b=this.c=null;this.a&&(this.a.destroy(),this.a=null);};ii.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var yl=this.g.b,zl=[];yl.f&&(zl=qh(yl.f,yl.a||1,this.b.a||0));var am=0;yl.c&&yl.i?am=(yl.i-1)*yl.c:0<zl.length&&(am=zl[0].start-(yl.g||0));var bm=am,cm=yl.b.length;0<zl.length&&zl.length!=yl.b.length&&(cm=Math.min(zl.length,yl.b.length));for(var dm=[],em=0;em<cm;++em){var fm=yl.b[em],gm=am/yl.a,hm=null,im=null;yl.c?(hm=am+yl.c,im=hm/yl.a):0<zl.length?(hm=zl[em].end-(yl.g||0),im=hm/yl.a):(im=gm+this.b.a,hm=im*yl.a);var am=hm,hm=0,jm=null;fm.a&&(hm=fm.a.ha,jm=fm.a.end);im=Math.min(this.b.a+bm/yl.a,im);dm.push(new sh(gm,im,new gh(this.f,fm.b,hm,jm)));}"dynamic"==this.c.type?this.a=new ai(dm,this.c,this.b,this.h):this.a=new xh(dm);return Promise.resolve(this.a);};function ji(yl,zl,am,bm,cm){this.b=yl;this.c=zl;this.f=am;this.h=bm;this.a=null;this.g=cm;}ji.prototype.destroy=function(){this.g=this.f=this.c=this.b=null;this.a&&(this.a.destroy(),this.a=null);};ji.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var yl=this.f.a,zl=qh(yl.c,yl.a||1,this.c.a||0),am=[],bm=0;bm<zl.length;++bm){var cm=zl[bm].start,dm=cm/yl.a,em=zl[bm].end/yl.a,cm=oh(this.g,this.f,bm+yl.j,cm);if(!cm)return yl=Error("Failed to generate media URL."),yl.type="dash",Promise.reject(yl);var fm=(yl.i||0)/yl.a;am.push(new sh(dm-fm,em-fm,cm));}"dynamic"==this.b.type?this.a=new ai(am,this.b,this.c,this.h):this.a=new xh(am);return Promise.resolve(this.a);};function ki(){this.C=li++;this.id=this.J=this.I=null;this.b=0;this.height=this.width=this.bandwidth=null;this.c=this.a="";this.fbQualityClass=this.fbQualityLabel=null;this.f=[];this.M=false;this.H=true;}var li=0;ki.prototype.destroy=function(){this.I&&(this.I.destroy(),this.I=null);this.J&&(this.J.destroy(),this.J=null);};function mi(yl){var zl=yl.a||"";yl.c&&(zl+='; codecs="'+yl.c+'"');return zl;}function ni(){this.C=oi++;this.id=null;this.contentType=this.lang="";this.b=false;this.m=[];this.a=[];}var oi=0;ni.prototype.destroy=function(){for(var yl=0;yl<this.m.length;++yl)this.m[yl].destroy();this.a=this.m=null;};function pi(yl){for(var zl=[],am=0;am<yl.a.length;++am){var bm=new si();bm.id=yl.C;bm.a=yl.a[am];bm.contentType=yl.contentType;bm.b=yl.m.length?mi(yl.m[0]):"";zl.push(bm);}return zl;}function qi(){this.id=null;this.start=0;this.b=null;this.a=[];}qi.prototype.destroy=function(){for(var yl=0;yl<this.a.length;++yl)this.a[yl].destroy();this.a=null;};function ri(){this.b=false;this.i=this.g=this.f=null;this.c=0;this.a=[];this.h=false;}ri.prototype.destroy=function(){for(var yl=0;yl<this.a.length;++yl)this.a[yl].destroy();this.a=null;};function si(){this.id=0;this.a=null;this.b=this.contentType="";}function ti(yl,zl,am,bm,cm){sc.call(this,yl);this.c=zl;this.a=new ed(am,bm,cm);this.L=0;this.u=this.D=this.b=null;this.F=false;this.g=null;this.o=false;this.j=null;this.i=false;this.h=new xc();this.l=this.f=false;this.v=0;this.K=15;this.A=false;}m(ti,sc);ti.prototype.B=function(yl){null!=yl.initialStreamBufferSize&&(this.v=Number(yl.initialStreamBufferSize));null!=yl.streamBufferSize&&(this.K=Number(yl.streamBufferSize));null!=yl.segmentRequestTimeout&&(this.a.o=Number(yl.segmentRequestTimeout));};ti.prototype.destroy=function(){aj(this);this.h.destroy();this.b=this.h=null;this.a.destroy();this.G=this.c=this.a=null;};j=ti.prototype;j.ma=function(){return this.b;};j.Za=function(){return this.D;};j.jb=function(yl){this.f||yl.then(function(){this.f=true;this.g||zi(this,0);}.bind(this)).catch(function(){});return this.h;};j.Da=function(){return this.l;};j.oa=function(yl,zl,am){yl!=this.b&&(this.u=yl.J.create(),yl.I.create().then(dd(this,function(bm){if(this.c){var cm=this.b;this.b=yl;this.D=bm;this.F=true;this.o||(cm?zl&&ui(this,true,am):zi(this,0));}})).catch(dd(this,function(bm){"aborted"!=bm.type&&(this.f?(bm=yb(bm),this.dispatchEvent(bm)):this.h.reject(bm));})));};j.gb=function(){return ui(this,false);};function ui(yl,zl,am){yl.b&&!yl.o&&(yl.o=true,aj(yl),ld(yl.a).then(dd(yl,function(){var bm=this.c.currentTime;if(!zl&&0<gd(this.a,bm)&&0<=uh(this.a.b,bm))return Promise.resolve();if(am)return kd(this.a,this.c.currentTime+am);this.A=true;return jd(this.a);})).then(dd(yl,function(){this.o=false;zi(this,0);})).catch(dd(yl,function(bm){this.o=false;this.f?(bm=yb(bm),this.dispatchEvent(bm)):this.h.reject(bm);})));}j.hb=function(yl){return 0<gd(this.a,yl)&&0<=uh(this.a.b,yl);};j.ra=function(){};j.za=function(){return true;};j.Eb=function(){if(this.i&&!this.f){this.g=null;}else{var yl;if(yl=this.f&&!this.l)yl=1<this.a.c.buffered.length?true:false;if(yl){ui(this,true);}else{this.g=null;yl=this.b;var zl=this.D,am=this.c.currentTime;gd(this.a,this.i?am:am+(this.j||0))>=(this.i?Math.max(this.v,this.K):this.v)?(wi(this),zi(this,1000/(5*(Math.abs(this.c.playbackRate)||1)))):(zl=vi(this,am,zl))?(zl=id(this.a,zl,yl.b,this.u),this.u=null,this.F&&(this.F=false,xi(this,yl)),this.l=false,zl.then(dd(this,function(bm){var cm=bm.R;bm=bm.pb;this.i||(this.L=bm);null==this.j&&(this.j=cm);this.A&&0<gd(this.a,am)&&(this.A=false,this.c.currentTime+=.001);zi(this,0);})).catch(dd(this,function(bm){if("aborted"!=bm.type){var cm=[0,404,410,502,503,504];"net"==bm.type&&-1!=cm.indexOf(bm.Pb.status)&&this.b&&zi(this,1000);bm=yb(bm);this.dispatchEvent(bm);}}))):(wi(this),this.f&&!this.l&&(this.l=true,yi(this)),zi(this,200));}}};function vi(yl,zl,am){yl=yl.a;var bm=yl.b.length;yl=0<bm?yl.b[bm-1]:null;return null!=yl?null!=yl.a?am.la(yl.a):null:am.la(zl)||(am.length()?am.w():null);}function wi(yl){if(!yl.i&&null!=yl.j){yl.i=true;var zl=yl.a,am=yl.j,bm=am-zl.u;0!=bm&&(zl.b=vh(zl.b,bm),zl.u=am);yl.h.resolve(yl.j);}}function xi(yl,zl){var am;am=zl.a.split("/")[0];am=xb({type:"adaptation",bubbles:true,contentType:am,size:"video"!=am?null:{width:zl.width,height:zl.height},bandwidth:zl.bandwidth});yl.dispatchEvent(am);}function yi(yl){var zl=xb({type:"ended"});yl.dispatchEvent(zl);}function zi(yl,zl){yl.g=i.setTimeout(yl.Eb.bind(yl),zl);}function aj(yl){null!=yl.g&&(i.clearTimeout(yl.g),yl.g=null);}j.Aa=function(){return this.L;};function bj(yl){this.b=yl;this.a=null;}bj.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null);};bj.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var yl=new sh(0,null,this.b);this.a=new xh([yl]);return Promise.resolve(this.a);};function cj(yl,zl){sc.call(this,yl);this.b=zl;this.g=true;this.h=this.f=null;this.c=new xc();this.a=null;}m(cj,sc);cj.prototype.B=function(){};cj.prototype.destroy=function(){this.a&&this.b.removeChild(this.a);this.c.destroy();this.G=this.b=this.f=this.h=this.a=this.c=null;};j=cj.prototype;j.ma=function(){return this.f;};j.Za=function(){return this.h;};j.jb=function(){return this.c;};j.Da=function(){return true;};j.oa=function(yl){yl.I.create().then(dd(this,function(zl){if(this.b){if(0==zl.length())return Promise.reject(Error("No subtitles URL available."));var am=this.f;this.f=yl;this.h=zl;zl=yh(zl).url.b[0].toString();var bm=this.za();this.a&&(this.ra(false),this.b.removeChild(this.a));this.a=document.createElement("track");this.b.appendChild(this.a);this.a.src=zl;this.ra(bm);zl=xb({type:"adaptation",bubbles:true,contentType:"text",size:null,bandwidth:yl.bandwidth});this.dispatchEvent(zl);am||this.c.resolve(0);}}));};j.gb=function(){};j.hb=function(){return true;};j.ra=function(yl){this.g=yl;this.a&&(this.a.track.mode=yl?"showing":"disabled");};j.za=function(){this.a&&(this.g="showing"==this.a.track.mode);return this.g;};function dj(){}dj.prototype.parse=function(yl,zl,am,bm){var cm=null;try{var em,fm=new ob(zl);if(440786851!=qb(fm).id){em=null;}else{var gm=qb(fm);if(408125543!=gm.id){em=null;}else{var hm=gm.a.byteOffset,im,jm=new ob(gm.a);for(zl=null;ib(jm.a);){var km=qb(jm);if(357149030==km.id){zl=km;break;}}if(zl){for(var lm=new ob(zl.a),jm=1e+06;ib(lm.a);){var mm=qb(lm);if(2807729==mm.id){jm=tb(mm);break;}}im=jm/1e+09;}else im=null;em=im?{Kb:hm,Nb:im}:null;}}if(em){var nm=qb(new ob(yl));if(475249515!=nm.id){cm=null;}else{var om=em.Kb,pm=em.Nb;yl=[];var qm=new ob(nm.a);for(em=nm=-1;ib(qm.a);){var rm=qb(qm);if(187==rm.id){var sm,tm=new ob(rm.a),um=qb(tm);if(179!=um.id){sm=null;}else{var vm=tb(um),wm=qb(tm);if(183!=wm.id){sm=null;}else{for(var xm=new ob(wm.a),hm=0;ib(xm.a);){var ym=qb(xm);if(241==ym.id){hm=tb(ym);break;}}sm={Ob:vm,Jb:hm};}}if(sm){var zm=pm*sm.Ob,an=om+sm.Jb;if(0<=nm){var bn=new gh(bm,am,em,an-1);yl.push(new sh(nm,zm,bn));}nm=zm;em=an;}}}0<=nm&&(bn=new gh(bm,am,em,null),yl.push(new sh(nm,null,bn)));cm=yl;}}else cm=null;}catch(dm){if(!(dm instanceof RangeError))throw dm;}return cm;};function ej(yl,zl,am,bm,cm,dm,em,fm){this.h=yl;this.j=zl;this.f=am;this.a=bm;this.g=cm;this.b=dm;this.l=em;this.c=null;this.i=fm;}ej.prototype.destroy=function(){this.i=this.j=this.h=null;this.a.f();this.a=null;this.b&&(this.b.f(),this.b=null);this.g&&(this.g.f(),this.g=null);this.c=null;};ej.prototype.create=function(){if("webm"==this.f){var yl=Error("WebM is not supported in this build configuration.");yl.type="app";return Promise.reject(yl);}if(this.c)return this.c;yl=[jh(this.a)];"webm"==this.f&&yl.push(jh(this.g));this.b&&jh(this.b);return this.c=Promise.all(yl).then(dd(this,function(zl){var am=zl[0];zl=zl[1]||null;var bm=null;"mp4"==this.f?(bm=new wh(),bm=bm.parse(new DataView(am),this.a.h,this.a.b,this.i,this.b)):"webm"==this.f&&(bm=new dj(),bm=bm.parse(new DataView(am),new DataView(zl),this.a.b,this.i));if(!bm)return am=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),am.type="stream",Promise.reject(am);var cm;"dynamic"==this.h.type?cm=new ai(bm,this.h,this.j,this.l):cm=new xh(bm);return Promise.resolve(cm);}));};function fj(yl){this.a=yl;}function gj(yl,zl,am){for(var bm=eb()/1000,cm=0;cm<zl.a.length;++cm)for(var dm=zl.a[cm],em=0;em<dm.b.length;++em){var fm=dm.b[em];if("text"!=fm.contentType)for(var gm=0;gm<fm.a.length;++gm){var hm=fm.a[gm],im=0,im=im+(hm.g?1:0),im=im+(hm.b?1:0),im=im+(hm.a?1:0);0==im?(fm.a.splice(gm,1),--gm):1!=im&&(hm.g?(hm.b=null,hm.a=null):hm.b&&(hm.a=null));}}hj(zl);for(cm=0;cm<zl.a.length;++cm)for(dm=zl.a[cm],em=0;em<dm.b.length;++em){gm=fm=dm.b[em];hm=null;for(im=0;im<gm.a.length;++im){var jm=gm.a[im].f||"";hm?jm!=hm&&(gm.a.splice(im,1),--im):hm=jm;}0==fm.a.length&&(dm.b.splice(em,1),--em);}"dynamic"==zl.type&&null==zl.c&&(zl.c=bm);cm=new ri();"dynamic"==zl.type&&(cm.b=true,cm.f=zl.g,cm.g=new gh(am,zl.j||zl.url),cm.i=zl.c);cm.c=zl.h||5;for(dm=0;dm<zl.a.length;++dm){em=zl.a[dm];if(null==em.start)break;em=ij(yl,zl,em,bm,am);cm.a.push(em);}return cm;}function hj(yl){if(yl.a.length){null==yl.a[0].start&&(yl.a[0].start=0);var zl=function(gm){return 0==gm||!!gm;};"dynamic"==yl.type&&(yl.b=null);zl(yl.b)&&1==yl.a.length&&!zl(yl.a[0].a)&&(yl.a[0].a=yl.b);for(var am=0,bm=true,cm=0;cm<yl.a.length;++cm){var dm=yl.a[cm-1],em=yl.a[cm],fm=yl.a[cm+1]||{start:yl.b};!zl(em.start)&&dm&&zl(dm.start)&&zl(dm.a)&&(em.start=dm.start+dm.a);!zl(em.a)&&zl(fm.start)&&(em.a=fm.start-em.start);null!=em.start&&null!=em.a?am+=em.a:bm=false;}zl(yl.b)||(cm=yl.a[yl.a.length-1],bm?yl.b=am:zl(cm.start)&&zl(cm.a)?yl.b=cm.start+cm.a:"dynamic"!=yl.type&&(yl.b=am));}}function ij(yl,zl,am,bm,cm){var dm=new qi();dm.id=am.id;dm.start=am.start;dm.b=am.a;var em=new kc();am.b.forEach(function(om){em.push(om.contentType||"",om);});for(var fm=nc(em),gm=0;gm<fm.length;++gm){var hm=new kc();em.get(fm[gm]).forEach(function(om){hm.push(om.group,om);});for(var im=nc(hm),jm=0;jm<im.length;++jm){var km=new kc();hm.get(im[jm]).forEach(function(om){km.push(om.lang,om);});for(var lm=nc(km),mm=0;mm<lm.length;++mm){var nm=km.get(lm[mm]),nm=jj(yl,zl,am,nm,bm,cm);dm.a.push(nm);}}}return dm;}function jj(yl,zl,am,bm,cm,dm){n(bm.every(function(mm){return mm.group==bm[0].group&&(mm.lang||"")==(bm[0].lang||"")&&(mm.contentType||"")==(bm[0].contentType||"");}));var em=new ni(),fm=bm.filter(function(mm){return null!=mm.id;});fm.length==bm.length&&(em.id=fm.map(function(mm){return mm.id;}).sort().reduce(function(mm,nm){return mm+","+nm;}));em.lang=bm[0].lang||"";em.contentType=bm[0].contentType||"";em.b=bm.some(function(mm){return mm.c;});for(var fm={},gm=0;gm<bm.length;++gm)for(var hm=bm[gm],im=0;im<hm.a.length;++im){var jm=hm.a[im],km=mj(yl,jm),lm=em.a.slice(0);lj(km,lm);0==lm.length&&0<em.a.length||!(jm=oj(zl,am,jm,cm,dm))||(em.m.push(jm),em.a=lm,fm[jm.C]=hm);}if(em.a.some(function(mm){return ""==mm.a;}))return em.m.forEach(function(mm){mm.M=true;}),em;yl=kj(bm);for(gm=0;gm<em.m.length;++gm)jm=em.m[gm],hm=fm[jm.C],hm==yl&&(jm.M=true);return em;}function kj(yl){for(var zl=null,am=null,bm=0;bm<yl.length;++bm)for(var cm=yl[bm],dm=0;dm<cm.a.length;++dm){var em=cm.a[dm],em=(em.width||1)*(em.height||1)*(em.bandwidth||1);if(null==zl||em<zl)zl=em,am=cm;}return am;}function lj(yl,zl){if(0==zl.length){Array.prototype.push.apply(zl,yl);}else for(var am=0;am<zl.length;++am){for(var bm=false,cm=0;cm<yl.length;++cm){var dm=zl[am],em=yl[cm];if(dm.a==em.a&&dm.h==em.h&&dm.l==em.l&&dm.g==em.g&&dm.i==em.i&&dm.f==em.f&&dm.j==em.j&&td(dm.c,em.c)){bm=true;wd(zl[am],yl[cm].b);break;}}bm||(zl.splice(am,1),--am);}}function mj(yl,zl){var am=[];if(0==zl.c.length){am.push(new ud());}else if(yl.a)for(var bm=0;bm<zl.c.length;++bm)am.push.apply(am,nj(yl,zl.c[bm]));return am;}function nj(yl,zl){var am=[];if(2!=yl.a.length)return [];var bm=yl.a(zl.c||"",zl.f);if(!(bm&&bm instanceof Array))return [];for(var cm=0;cm<bm.length;++cm){var dm,em=bm[cm];dm=new ud();if(em){var fm=hc(em,"keySystem");if(null!=fm){dm.a=fm;}else throw Error("'keySystem' cannot be null.");var gm=hc(em,"licenseServerUrl");if(null!=gm){dm.h=gm;}else if(fm)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");fm=fc(em,"withCredentials");null!=fm&&(dm.l=fm);fm=jc(em,"licensePostProcessor",Function);null!=fm&&(dm.o=fm);fm=jc(em,"licensePreProcessor",Function);null!=fm&&(dm.u=fm);fm=fc(em,"distinctiveIdentifierRequired");null!=fm&&(dm.g=fm);fm=fc(em,"persistentStateRequired");null!=fm&&(dm.i=fm);fm=hc(em,"audioRobustness");null!=fm&&(dm.f=fm);fm=hc(em,"videoRobustness");null!=fm&&(dm.j=fm);fm=jc(em,"serverCertificate",Uint8Array);null!=fm&&(dm.c=fm);if(fm=jc(em,"initData",Object)){em=jc(fm,"initData",Uint8Array);if(null==em)throw Error("'initData.initData' cannot be null.");fm=hc(fm,"initDataType");if(null==fm)throw Error("'initData.initDataType' cannot be null.");dm.b.push({initData:new Uint8Array(em.buffer),initDataType:fm});}}0==dm.b.length&&zl.a&&zl.a.psshBox&&wd(dm,[{initData:zl.a.psshBox,initDataType:"cenc"}]);am.push(dm);}return am;}function oj(yl,zl,am,bm,cm){if(!am.s||0===am.s.length)return null;var dm=null,em=1,fm=0;if(am.g){dm=am.f.split("/")[1];if("mp4"!=dm&&"webm"!=dm){dm=null;}else{var gm=am.g;"webm"!=dm||gm.c?gm.a||gm.b&&gm.b.a?(em=gm.b,em||(em=new zf(),em.url=am.s,em.a=gm.a?gm.a.clone():null),fm=qj(em,cm),em=gm.c?qj(gm.c,cm):null,gm.f?(gm=gm.f,gm=new gh(cm,am.s,gm.ha,gm.end)):gm=null,yl=new ej(yl,zl,dm,fm,em,gm,bm,cm),zl=new rh(em),bm=new ki(),bm.I=yl,bm.J=zl,dm=bm):dm=null:dm=null;}em=am.g.h;fm=am.g.g;}else if(am.b){dm=am.b,!dm.c&&!dm.f&&1<dm.b.length?dm=null:dm.c||zl.a||dm.f||1!=dm.b.length?dm.f&&0===dm.f.a.length?dm=null:(dm=dm.h?qj(dm.h,cm):null,yl=new ii(yl,zl,am,bm,cm),zl=new rh(dm),bm=new ki(),bm.I=yl,bm.J=zl,dm=bm):dm=null,em=am.b.a,fm=am.b.g;}else if(am.a){yl:if(dm=am.a,em=0+(dm.f?1:0),em+=dm.c?1:0,em+=dm.b?1:0,0==em?em=false:(1!=em&&(dm.f?(dm.c=null,dm.b=null):dm.c&&(dm.b=null)),em=true),em){em=null;if(dm.g&&(em=(dm=am.a.g)?pj(am,dm,ag):null,!em)){dm=null;break yl;}dm=em?qj(em,cm):null;em=am.a;em.f?(em=am.f.split("/")[1],"mp4"!=em&&"webm"!=em?yl=null:"webm"!=em||dm?oh(cm,am,1,0)?(fm=(fm=am.a.f)?pj(am,fm,zf):null)?(fm=qj(fm,cm),yl=new ej(yl,zl,em,fm,dm,null,bm,cm)):yl=null:yl=null:yl=null):yl=em.h?em.c?new ji(yl,zl,am,bm,cm):em.b?"dynamic"!=yl.type&&null==zl.a?null:new hi(yl,zl,am,bm,cm):null:null;yl?(zl=new rh(dm),bm=new ki(),bm.I=yl,bm.J=zl,dm=bm):dm=null;}else dm=null;;em=am.a.a;fm=am.a.i;}else "text"==am.f.split("/")[0]&&(dm=new ki(),dm.I=new bj(new gh(cm,am.s)));if(!dm)return null;dm.id=am.id;fm&&(dm.b=-1*fm/em);dm.bandwidth=am.bandwidth;dm.width=am.width;dm.height=am.height;dm.a=am.f||"";dm.c=am.h||"";dm.fbQualityLabel=am.fbQualityLabel||null;dm.fbQualityClass=am.fbQualityClass||null;for(yl=0;yl<am.c.length;++yl)zl=am.c[yl],zl.b&&dm.f.push(zl.b);return dm;}function pj(yl,zl,am){zl=ph(zl,yl.id,null,yl.bandwidth,null);if(!zl)return null;am=new am();am.url=ih(yl.s,zl);return am;}function qj(yl,zl){var am=yl.url,bm=0,cm=null;yl.a&&(bm=yl.a.ha,cm=yl.a.end);return new gh(zl,am,bm,cm);}function rj(){this.streamStats=null;this.droppedFrames=this.decodedFrames=NaN;this.bufferingTime=this.playTime=this.estimatedBandwidth=0;this.playbackLatency=NaN;this.bufferingHistory=[];this.bandwidthHistory=[];this.streamHistory=[];}function sj(yl,zl){var am=new tj(zl);yl.streamHistory.push(new uj(am));if(am.videoHeight||!yl.streamStats)yl.streamStats=am;}function tj(yl){this.videoWidth=yl.width;this.videoHeight=yl.height;this.videoMimeType=yl.a;this.videoBandwidth=yl.bandwidth;}function uj(yl){this.timestamp=eb()/1000;this.value=yl;}function vj(yl,zl,am,bm,cm){this.b=new gh(null,[new ye(yl)]);this.a=new ah();this.a.body=zl;this.a.method=am;this.a.a=3;this.a.i=bm;this.a.c=0;yl=cm||{};for(var dm in yl)this.a.b[dm]=yl[dm];}function wj(yl){return jh(yl.b,yl.a).then(function(zl){return Promise.resolve(new Uint8Array(zl));});}function xj(yl,zl,am){sc.call(this,yl);this.c=zl;this.j=am;this.a=this.h=null;this.i=new oc();this.b=[];this.f=[];this.o=0;this.g=new xc();this.l=null;}m(xj,sc);xj.prototype.destroy=function(){this.G=null;for(var yl=0;yl<this.f.length;++yl)this.f[yl].close().catch(function(){});this.f=[];this.b=this.a=this.h=null;this.g.destroy();this.g=null;this.i.destroy();this.i=null;this.l&&(i.clearTimeout(this.l),this.l=null);this.c=this.j=null;};xj.prototype.initialize=function(){var yl=new kc(),zl;zl=this.j;if(zl.D){zl=zl.a.a[0];for(var am=[],bm=0;bm<zl.a.length;++bm)am.push.apply(am,pi(zl.a[bm]));zl=am;}else zl=[];for(am=0;am<zl.length;++am)bm=zl[am],bm.a.a||bm.b&&!fk(bm.b)||yl.push(bm.contentType,bm);for(var am={},bm=false,cm=0;cm<zl.length;++cm){var dm=zl[cm];if(dm.a.a&&!yl.a.hasOwnProperty(dm.contentType)){var em=dm.a.a,fm=am[em];fm||(fm=dm.a,fm={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:fm.g?"required":"optional",persistentState:fm.i?"required":"optional",sessionTypes:["temporary"]},am[em]=fm);if(dm.b&&(em=dm.contentType+"Capabilities",em in fm)){bm=true;fm[em]||(fm[em]=[]);var gm;"audio"==dm.contentType?gm=dm.a.f:"video"==dm.contentType&&(gm=dm.a.j);fm[em].push({contentType:dm.b,robustness:gm});}}}if(!bm)if(zl.length){this.a=zl[0].a;}else throw yl=Error("No DrmInfo exists!"),yl.type="drm",yl;if(0==Object.keys(am).length)return cl(this.j,yl),this.g.resolve(),Promise.resolve();gm=new xc();am=yj(am,gm);am=am.then(this.v.bind(this,zl,yl));gm.reject(null);return am;};function yj(yl,zl){for(var am in yl)zl=zl.catch(function(bm,cm){return navigator.requestMediaKeySystemAccess(bm,[cm]);}.bind(null,am,yl[am]));return zl;}xj.prototype.v=function(yl,zl,am){if(!this.c)return ak();for(var bm=am.keySystem,cm=am.getConfiguration(),dm=["audio","video"],em=0;em<dm.length;++em){var fm=dm[em];if(!zl.a.hasOwnProperty(fm)){var gm=cm[fm+"Capabilities"];if(gm){for(var gm=gm[0],hm=[],im={},jm=0;jm<yl.length;++jm){var km=yl[jm],lm=gm?km.b==gm.contentType:km.contentType==fm;km.a.a!=bm||!lm||km.id in im||(hm.push(km),im[km.id]=true,this.a=this.a?vd(this.a,km.a):km.a);}zl.set(fm,hm);}}}cl(this.j,zl);return am.createMediaKeys().then(function(mm){this.h=mm;}.bind(this));};function zj(yl){return yl.c?yl.h?yl.c.setMediaKeys(yl.h).then(dd(yl,function(){return this.c?this.a.c?this.h.setServerCertificate(this.a.c):Promise.resolve():ak();})).then(dd(yl,function(){if(!this.c)return ak();for(var zl=0;zl<this.a.b.length;++zl){var am=this.a.b[zl];this.u({type:"encrypted",initDataType:am.initDataType,initData:am.initData});}0==this.a.b.length&&pc(this.i,this.c,"encrypted",this.u.bind(this));})):Promise.resolve():ak();}function ak(){var yl=Error("EmeManager destroyed");yl.type="destroy";return Promise.reject(yl);}xj.prototype.u=function(yl){for(var zl=new Uint8Array(yl.initData),am=0;am<this.b.length;++am)if(td(zl,this.b[am].data))return;try{var cm=bk(this);}catch(bm){zl=yb(bm);this.dispatchEvent(zl);this.g.reject(bm);return;}yl=cm.generateRequest(yl.initDataType,yl.initData);this.b.push({data:zl,Ga:cm});yl.catch(dd(this,function(dm){if(this.c){for(var em=0;em<this.b.length;++em)if(this.b[em].Ga==cm){this.b.splice(em,1);break;}em=yb(dm);this.dispatchEvent(em);this.g.reject(dm);}}));this.f.push(cm);};function bk(yl){var zl=null,zl=yl.h.createSession();pc(yl.i,zl,"message",yl.B.bind(yl));pc(yl.i,zl,"keystatuseschange",yl.A.bind(yl));return zl;}xj.prototype.B=function(yl){ck(this,yl.target,this.a,yl.message);};xj.prototype.A=function(yl){yl=yl.target;var zl={};yl.keyStatuses.forEach(function(bm,cm){if("string"==typeof bm){var dm=bm;bm=cm;cm=dm;}if("com.microsoft.playready"==this.a.a&&16==bm.byteLength){var dm=new DataView(bm),em=dm.getUint32(0,true),fm=dm.getUint16(4,true),gm=dm.getUint16(6,true);dm.setUint32(0,em,false);dm.setUint16(4,fm,false);dm.setUint16(6,gm,false);}dm=sd(new Uint8Array(bm));zl[dm]=cm;}.bind(this));if(yl.expiration<Date.now()){for(var am=0;am<this.b.length;++am)if(this.b[am].Ga==yl){this.b.splice(am,1);break;}yl.close();this.f.splice(this.f.indexOf(yl),1);}fl(this.j,zl);};function ck(yl,zl,am,bm){bm=dk(am,bm);wj(new vj(bm.url,bm.body,bm.method,am.l,bm.headers)).then(dd(yl,function(cm){am.o&&(cm=am.o(cm));return zl.update(cm);})).then(dd(yl,function(){var cm=xb({type:"sessionReady",detail:zl});this.dispatchEvent(cm);this.o++;this.o>=this.f.length&&this.g.resolve();})).catch(dd(yl,function(cm){cm.Ga=zl;cm=yb(cm);this.dispatchEvent(cm);}));}function dk(yl,zl){var am={url:yl.h,body:zl.slice(0),method:"POST",headers:{}};if("com.microsoft.playready"===yl.a){for(var bm=String.fromCharCode.apply(null,new Uint16Array(am.body)),bm=(new DOMParser()).parseFromString(bm,"application/xml"),cm=bm.getElementsByTagName("name"),dm=bm.getElementsByTagName("value"),em=0;em<cm.length;em++)am.headers[cm[em].childNodes[0].nodeValue]=dm[em].childNodes[0].nodeValue;am.body=i.atob(bm.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue);}if(!yl.u)return am;yl.u(am);am.url=hc(am,"url");if(null==am.url)throw Error("'url' cannot be null.");if(!(am.body instanceof ArrayBuffer||"string"==typeof am.body||null==am.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");am.method=hc(am,"method");if("GET"!=am.method&&"POST"!=am.method)throw Error("'method' must be either 'GET' or 'POST'.");am.headers=jc(am,"headers",Object);if(null==am.headers)throw Error("'headers' cannot be null.");return am;}function ek(yl){sc.call(this,null);this.a=yl;this.b=null;this.f=new oc();this.i=this.h=null;this.A=0;this.u=null;this.j=false;this.D=true;this.g=new rj();this.c={enableAdaptation:true,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new v()};this.l=1;this.B=null;}m(ek,sc);l("shaka.player.Player",ek);ek.version="v1.6.4-fb";ek.isBrowserSupported=function(){return !!i.MediaSource&&!!i.Promise&&!!Element.prototype.requestFullscreen&&!!document.exitFullscreen&&"fullscreenElement" in document&&!!i.Uint8Array;};ek.prototype.U=function(yl){this.D=yl;};ek.prototype.setResumeAfterBuffering=ek.prototype.U;function fk(yl){return "text/vtt"==yl?!!i.VTTCue:MediaSource.isTypeSupported(yl);}ek.isTypeSupported=fk;ek.setTextStyle=function(yl){var zl=document.getElementById("ShakaPlayerTextStyle");zl||(zl=document.createElement("style"),zl.id="ShakaPlayerTextStyle",document.head.appendChild(zl));for(zl=zl.sheet;zl.cssRules.length;)zl.deleteRule(0);zl.insertRule("::cue { "+x(yl)+" }",0);};ek.prototype.destroy=function(){return this.o().then(dd(this,function(){this.f.destroy();this.a=this.f=null;})).catch(function(){});};ek.prototype.destroy=ek.prototype.destroy;ek.prototype.o=function(){if(!this.b)return Promise.resolve();this.j&&kk(this);this.a.pause();qc(this.f);jk(this);hk(this);this.h&&(this.h.destroy(),this.h=null);this.a.src="";var yl=this.a.setMediaKeys(null);this.b&&(this.b.destroy(),this.b=null);this.j=false;this.g=new rj();return yl;};ek.prototype.unload=ek.prototype.o;ek.prototype.da=function(yl){yk(yl,this.a);var zl=this.o();this.a.autoplay&&(p("load"),pc(this.f,this.a,"timeupdate",this.tb.bind(this)));yl.Xa(this.c);yl.U=this.B;this.B=null;zl=zl.then(dd(this,function(){return yl.Ia();}));zl.catch(dd(this,function(am){yl.destroy();return Promise.reject(am);}));return zl.then(dd(this,function(){if(!this.a)return gk();this.b=yl;pc(this.f,this.b,"seekrangechanged",this.Ab.bind(this));this.h=new xj(this,this.a,this.b);return this.h.initialize();})).then(dd(this,function(){if(!this.a)return gk();pc(this.f,this.a,"error",this.Lb.bind(this));pc(this.f,this.a,"playing",this.zb.bind(this));pc(this.f,this.a,"pause",this.yb.bind(this));return zk(this.b,this,this.a);})).then(dd(this,function(){return this.a?zj(this.h):gk();})).then(dd(this,function(){if(!this.a)return gk();ik(this);})).catch(dd(this,function(am){if(!this.a)return gk();if("destroy"!=am.type){var bm=yb(am);this.dispatchEvent(bm);}return this.o().then(function(){return Promise.reject(am);});}));};ek.prototype.load=ek.prototype.da;function gk(){var yl=Error("Player destroyed");yl.type="destroy";return Promise.reject(yl);}j=ek.prototype;j.tb=function(){q("load");this.g.playbackLatency=r("load")/1000;this.f.pa(this.a,"timeupdate");};j.Lb=function(){if(this.a.error){var yl=this.a.error.code;yl!=MediaError.MEDIA_ERR_ABORTED&&(yl=Error(lk[yl]||"Unknown playback error."),yl.type="playback",yl=yb(yl),this.dispatchEvent(yl));}};j.zb=function(){p("playing");!this.i&&0>this.l&&(this.a.playbackRate=0,this.v(this.a.currentTime,Date.now(),this.l));this.j&&kk(this);};j.yb=function(){q("playing");var yl=r("playing");if(!isNaN(yl)){var zl=this.g;zl.playTime+=yl/1000;}hk(this);};j.Ab=function(yl){this.A=yl.start;};j.ib=function(){if(!this.a.paused){q("playing");var yl=r("playing");if(!isNaN(yl)){var zl=this.g;zl.playTime+=yl/1000;p("playing");}}yl=this.g;zl=this.a;zl.getVideoPlaybackQuality&&(zl=zl.getVideoPlaybackQuality(),yl.decodedFrames=zl.totalVideoFrames,yl.droppedFrames=zl.droppedVideoFrames);return this.g;};ek.prototype.getStats=ek.prototype.ib;ek.prototype.ca=function(){return this.b?this.b.na():[];};ek.prototype.getVideoTracks=ek.prototype.ca;ek.prototype.$=function(){return this.b?this.b.ca():[];};ek.prototype.getAudioTracks=ek.prototype.$;ek.prototype.ba=function(){return this.b?this.b.Ya():[];};ek.prototype.getTextTracks=ek.prototype.ba;ek.prototype.selectVideoTrack=function(yl,zl){return this.b?this.b.selectVideoTrack(yl,void 0==zl?true:zl):false;};ek.prototype.selectVideoTrack=ek.prototype.selectVideoTrack;ek.prototype.ea=function(yl,zl,am){return this.b?hl(this.b,"audio",yl,void 0==zl?true:zl,am):false;};ek.prototype.selectAudioTrack=ek.prototype.ea;ek.prototype.fa=function(yl){return this.b?hl(this.b,"text",yl,false):false;};ek.prototype.selectTextTrack=ek.prototype.fa;ek.prototype.Z=function(yl){this.b&&dl(this.b,yl);};ek.prototype.enableTextTrack=ek.prototype.Z;ek.prototype.T=function(yl){hk(this);0<=yl?this.a.playbackRate=yl:this.a.paused||(this.a.playbackRate=0,this.v(this.a.currentTime,Date.now(),yl));this.l=yl;};ek.prototype.setPlaybackRate=ek.prototype.T;ek.prototype.K=function(){return this.l;};ek.prototype.getPlaybackRate=ek.prototype.K;ek.prototype.ga=function(yl){this.B=yl;};ek.prototype.setPlaybackStartTime=ek.prototype.ga;ek.prototype.F=function(){return this.b?this.b.$a():false;};ek.prototype.isLive=ek.prototype.F;ek.prototype.Y=function(yl){if(yl){var zl=fc(yl,"enableAdaptation");null!=zl&&(this.c.enableAdaptation=zl);zl=gc(yl,"streamBufferSize",0);null!=zl&&(this.c.streamBufferSize=zl);zl=gc(yl,"liveStreamEndTimeout",0);null!=zl&&(this.c.liveStreamEndTimeout=zl);zl=gc(yl,"licenseRequestTimeout",0);null!=zl&&(this.c.licenseRequestTimeout=zl);zl=gc(yl,"mpdRequestTimeout",0);null!=zl&&(this.c.mpdRequestTimeout=zl);zl=gc(yl,"minMpdRefreshInterval",0);null!=zl&&(this.c.minMpdRefreshInterval=zl);zl=fc(yl,"enableLiveInterruptionDetection");null!=zl&&(this.c.enableLiveInterruptionDetection=zl);zl=gc(yl,"liveInterruptionConsecutiveUpdatesWithoutChange");null!=zl&&(this.c.liveInterruptionConsecutiveUpdatesWithoutChange=zl);zl=gc(yl,"liveInterruptionConsecutiveUpdatesWithChange");null!=zl&&(this.c.liveInterruptionConsecutiveUpdatesWithChange=zl);zl=gc(yl,"segmentRequestTimeout",0);null!=zl&&(this.c.segmentRequestTimeout=zl);zl=hc(yl,"preferredLanguage");null!=zl&&(this.c.preferredLanguage=zl);zl=jc(yl,"restrictions",v);null!=zl&&(this.c.restrictions=zl.clone());yl=fc(yl,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation");null!=yl&&(bh=!yl);this.b&&this.b.Xa(this.c);}};ek.prototype.configure=ek.prototype.Y;ek.prototype.aa=function(){return this.c;};ek.prototype.getConfiguration=ek.prototype.aa;function hk(yl){yl.i&&(i.clearTimeout(yl.i),yl.i=null);}function ik(yl){jk(yl);yl.u=i.setTimeout(yl.L.bind(yl),100);}function jk(yl){yl.u&&(i.clearTimeout(yl.u),yl.u=null);}ek.prototype.v=function(yl,zl,am){this.i=null;var bm=(Date.now()-zl)/1000*am;this.a.currentTime<this.A+(this.F()?1:.05)?this.a.pause():(bm=Math.max(this.A,yl+bm),this.a.currentTime=bm,this.i=i.setTimeout(this.v.bind(this,yl,zl,am),250));};function kk(yl){q("buffering");var zl=yl.g;zl.bufferingTime+=r("buffering")/1000;yl.j=false;yl.dispatchEvent(xb({type:"bufferingEnd"}));}ek.prototype.L=function(){ik(this);if(!this.a.ended&&!this.a.seeking){var yl=this.a.buffered,zl=yl.length?yl.end(yl.length-1):0,yl=Math.max(zl-this.a.currentTime,0),am=this.a.duration,bm=this.a.currentTime;if(this.j){if(zl=Number(this.b.A.initialStreamBufferSize),am=Math.max(am-bm-.05,0),cm||yl>zl||yl>am)kk(this),this.D&&this.a.play();}else{var am=isNaN(am)?0:Math.max(am-.05,0),cm;!(this.a.paused||zl>=am||bm>=am)&&.5>yl&&(this.j=true,this.a.pause(),this.g.bufferingHistory.push(eb()/1000),p("buffering"),this.dispatchEvent(xb({type:"bufferingStart"})));}}};var lk={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};function mk(yl){for(var zl=0;zl<yl.length;++zl)for(var am=yl[zl],bm=0;bm<am.a.length;++bm){for(var cm=am.a[bm],dm=cm,em=0;em<dm.m.length;++em)fk(mi(dm.m[em]))||(dm.m.splice(em,1),--em);0==cm.m.length&&(am.a.splice(bm,1),--bm);}}function nk(yl){for(var zl=0;zl<yl.length;++zl)for(var am=yl[zl],bm=0;bm<am.a.length;++bm)am.a[bm].m.sort(ok);}function ok(yl,zl){var am=yl.bandwidth||Number.MAX_VALUE,bm=zl.bandwidth||Number.MAX_VALUE;return am<bm?-1:am>bm?1:0;}function pk(yl){this.a=yl;}pk.prototype.destroy=function(){this.a.destroy();this.a=null;};pk.prototype.update=function(yl){var zl=qk(yl),am=qk(this.a);return Promise.all([zl,am]).then(dd(this,function(bm){var cm=bm[0];bm=bm[1];var dm=this.a.a;mk(dm);nk(dm);yl.b&&!this.a.b&&(yl.h=true);yl.f=this.a.f;yl.g=this.a.g?this.a.g.clone():null;yl.c=this.a.c;dm=[];rk(yl,this.a,cm,bm,dm);cm=yl.a;mk(cm);nk(cm);return Promise.resolve(dm);}));};function qk(yl){function zl(bm,cm){return bm.concat(cm);}var am=yl.a.map(function(bm){return bm.a;}).reduce(zl,[]).map(function(bm){return bm.m;}).reduce(zl,[]);yl=am.map(function(bm){return bm.I.create();});return Promise.all(yl).then(function(bm){for(var cm={},dm=0;dm<am.length;++dm)cm[am[dm].C]=bm[dm];return Promise.resolve(cm);});}function rk(yl,zl,am,bm,cm){var dm=new kc();yl.a.forEach(function(hm,im){dm.push(hm.id||""+im,hm);});var em=new kc();zl.a.forEach(function(hm,im){em.push(hm.id||""+im,hm);});yl=nc(dm);for(zl=0;zl<yl.length;++zl){var fm=yl[zl],gm=dm.get(fm);1<gm.length||(fm=em.get(fm))&&0!=fm.length&&1==fm.length&&(sk(gm[0],fm[0],am,bm,cm),gm[0].b=fm[0].b);}}function sk(yl,zl,am,bm,cm){var dm=new kc();yl.a.forEach(function(hm,im){dm.push(hm.id||""+im,hm);});var em=new kc();zl.a.forEach(function(hm,im){em.push(hm.id||""+im,hm);});yl=nc(dm);for(zl=0;zl<yl.length;++zl){var fm=yl[zl],gm=dm.get(fm);1<gm.length||(fm=em.get(fm))&&0!=fm.length&&1==fm.length&&tk(gm[0],fm[0],am,bm,cm);}}function tk(yl,zl,am,bm,cm){var dm=new kc();yl.m.forEach(function(jm,km){dm.push(jm.id||""+km,jm);});var em=new kc();zl.m.forEach(function(jm,km){em.push(jm.id||""+km,jm);});zl={};for(var fm=nc(dm),gm=0;gm<fm.length;++gm){var hm=fm[gm];zl[hm]=hm;var im=dm.get(hm);1<im.length||((hm=em.get(hm))&&0!=hm.length?1==hm.length&&(uk(im[0],hm[0],am,bm),im[0].J=hm[0].J,hm[0].J=null,im[0].b=hm[0].b):(cm.push(im[0]),yl.m.splice(yl.m.indexOf(im[0]),1)));}fm=nc(em);for(gm=0;gm<fm.length;++gm)hm=fm[gm],zl[hm]||(zl[hm]=hm,hm=em.get(hm),yl.m.push(hm[0]));}function uk(yl,zl,am,bm){yl=am[yl.C];bm=bm[zl.C];zl=yl.length();yl.Ea(bm)&&(bm=yl.length(),zl!==bm?(yl.v=0,yl.u++):(yl.v++,yl.u=0));}function vk(){this.a=this.b=null;this.f=new oc();this.c=Number.POSITIVE_INFINITY;this.i=true;this.g=false;}l("shaka.media.SimpleAbrManager",vk);vk.prototype.destroy=function(){this.f.destroy();this.a=this.b=this.f=null;};vk.prototype.initialize=function(yl,zl){this.b||this.a||(this.b=yl,this.a=zl);};vk.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4000,pc(this.f,this.b,"bandwidth",this.l.bind(this)),pc(this.f,this.a,"adaptation",this.j.bind(this)),pc(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=true);};vk.prototype.enable=function(yl){this.i=yl;};vk.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var yl=wk(this);return yl?yl.id:null;};vk.prototype.getInitialAudioTrackId=function(){return null;};vk.prototype.selectVideoTrack=function(yl,zl,am){this.g&&this.a.selectVideoTrack(yl.id,zl,am);};vk.prototype.l=function(){Date.now()<this.c||this.h();};vk.prototype.h=function(){if(this.i){var yl=wk(this);if(yl){if(yl.active){this.c=Date.now()+3000;return;}this.selectVideoTrack(yl,false);}this.c=Number.POSITIVE_INFINITY;}};vk.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+30000);};function wk(yl){var zl=yl.a.na();if(0==zl.length)return null;zl.sort(fa);var am;yl:{am=yl.a.ca();for(var bm=0;bm<am.length;++bm)if(am[bm].active){am=am[bm];break yl;}am=null;};am=am?am.bandwidth:0;yl=yl.b.getBandwidth();for(var bm=zl[0],cm=0;cm<zl.length;++cm){var dm=zl[cm],em=cm+1<zl.length?zl[cm+1]:{bandwidth:Number.POSITIVE_INFINITY};if(dm.bandwidth&&(em=(em.bandwidth+am)/.85,yl>=(dm.bandwidth+am)/.95&&yl<=em&&(bm=dm,bm.active)))break;}return bm;}function xk(yl,zl,am){sc.call(this,null);this.a=yl;this.ea=zl;this.i=new oc();this.g=new MediaSource();this.b=null;this.wa=this.xa=0;this.va=3;this.La=false;this.Qa=this.Ra=3;this.c=new kc();this.o=am;this.o.initialize(zl,this);this.D=false;this.B="en";this.ga=false;this.K=null;this.u=new xc();this.ab=new xc();this.h=new v();this.v=null;this.$=1;this.f={};this.aa=new xc();this.Y=0;this.Ua=15;this.l=null;this.Ma=this.Pa=false;this.j={};this.U=this.T=this.L=null;this.A={};this.fa=this.da=false;}m(xk,sc);l("shaka.player.StreamVideoSource",xk);xk.prototype.Xa=function(yl){null!=yl.streamBufferSize&&(this.A.streamBufferSize=yl.streamBufferSize);null!=yl.segmentRequestTimeout&&(this.A.segmentRequestTimeout=yl.segmentRequestTimeout);wl(this);null!=yl.enableAdaptation&&this.o.enable(Boolean(yl.enableAdaptation));null!=yl.mpdRequestTimeout&&(this.wa=Number(yl.mpdRequestTimeout));null!=yl.minMpdRefreshInterval&&(this.va=Number(yl.minMpdRefreshInterval)/1000);null!=yl.enableLiveInterruptionDetection&&(this.La=!!yl.enableLiveInterruptionDetection);null!=yl.liveInterruptionConsecutiveUpdatesWithoutChange&&(this.Ra=Number(yl.liveInterruptionConsecutiveUpdatesWithoutChange));null!=yl.liveInterruptionConsecutiveUpdatesWithChange&&(this.Qa=Number(yl.liveInterruptionConsecutiveUpdatesWithChange));null!=yl.liveStreamEndTimeout&&(this.Ua=Number(yl.liveStreamEndTimeout));null!=yl.preferredLanguage&&(this.B=cc(String(yl.preferredLanguage)));null!=yl.restrictions&&(this.h=yl.restrictions,this.D&&el(this));};xk.prototype.destroy=function(){sl(this);this.u.destroy();this.aa.destroy();this.aa=this.u=null;this.T&&(i.clearTimeout(this.T),this.T=null);this.L&&(i.clearTimeout(this.L),this.L=null);this.j=null;this.i.destroy();this.i=null;ec(this.f).forEach(function(yl){yl.destroy();});this.c=this.f=null;this.a&&(this.a.destroy(),this.a=null);this.o.destroy();this.G=this.h=this.K=this.b=this.g=this.ea=this.o=null;};function yk(yl,zl){pc(yl.i,yl.g,"sourceopen",yl.ub.bind(yl));zl.src=i.URL.createObjectURL(yl.g);}function zk(yl,zl,am){if(!yl.D)return yl=Error("Cannot call attach() right now."),yl.type="app",Promise.reject(yl);yl.G=zl;yl.b=am;yl.K=zl.ib();pc(yl.i,yl.ea,"bandwidth",yl.Mb.bind(yl));yl.a.b&&(pc(yl.i,zl,"bufferingStart",yl.sb.bind(yl)),pc(yl.i,zl,"bufferingEnd",yl.rb.bind(yl)));zl=yl.b.setMediaKeys(yl.b.mediaKeys);yl.ab.then(dd(yl,function(){jl(this).then(dd(this,function(){this.u&&this.u.resolve();})).catch(dd(this,function(bm){this.u&&this.u.reject(bm);}));}));return Promise.all([yl.u,zl]);}j=xk.prototype;j.Ia=function(){if(this.D){var yl=Error("Cannot call load() right now.");yl.type="app";return Promise.reject(yl);}if(!this.a||0==this.a.a.length)return yl=Error("The manifest does not specify any content."),yl.type="stream",Promise.reject(yl);yl=this.a.a;mk(yl);nk(yl);if(0==this.a.a.length||0==this.a.a[0].a.length)return yl=Error("The manifest specifies content that cannot be displayed on this browser/platform."),yl.type="stream",Promise.reject(yl);this.D=true;this.A.initialStreamBufferSize=this.a.c;wl(this);el(this);return Promise.resolve();};j.kb=function(yl){return yl.v>=this.Ra;};j.lb=function(yl){return yl.u>=this.Qa;};j.eb=function(yl){var zl=Date.now(),am=this.L=null,bm=this.a.g;(yl?this.bb():this.cb(bm)).then(dd(this,function(cm){am=new pk(cm);return am.update(this.a);})).then(dd(this,function(cm){am.destroy();am=null;if(this.La)if(this.fa){(tl(this).every(this.lb.bind(this))||this.a.h)&&sl(this);}else if(this.da&&tl(this).some(this.kb.bind(this))){this.fa=true;this.$=this.b.playbackRate;this.b.playbackRate=0;var dm=xb({type:"streaminterrupted",bubbles:true});this.dispatchEvent(dm);}(dm=ul(this,tl(this)))&&this.b.paused&&dm.end>this.b.currentTime+10&&(this.b.currentTime=dm.end);if(this.a.h&&this.b.currentTime+.5>this.Y)return this.qa();for(dm=0;dm<cm.length;++dm)bl(this,cm[dm]);this.A.initialStreamBufferSize=this.a.c;wl(this);el(this);0==Object.keys(this.f).length?jl(this):al(this,(Date.now()-zl)/1000);})).catch(dd(this,function(cm){am&&(am.destroy(),am=null);"aborted"!=cm.type&&(cm=yb(cm),this.dispatchEvent(cm),this.a&&al(this,0));}));};j.cb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};j.bb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.");};function al(yl,zl){if(null!=yl.a.f){var am=Math.max(yl.a.f,yl.va),am=Math.max(am-zl,0);yl.L=i.setTimeout(yl.eb.bind(yl,false),1000*am);}}function bl(yl,zl){var am=zl.a.split("/")[0],bm=yl.f[am];if(bm&&bm.ma()==zl){var cm=yl.c.get(zl.a.split("/")[0]).map(function(dm){return dm.m;}).reduce(function(dm,em){return dm.concat(em);},[]).filter(function(dm){return dm.M&&dm.H;});if(0==cm.length){am=Error("All usable streams have been removed from the manifest.");am.type="app";am=yb(am);yl.dispatchEvent(am);return;}yl.j[am].Ja==zl&&delete yl.j[am];bm.oa(cm[0],true);zl.destroy();}zl.destroy();}j.na=function(){if(!this.c.a.hasOwnProperty("video"))return [];for(var yl=this.f.video,yl=(yl=yl?yl.ma():null)?yl.C:0,zl=[],am=this.c.get("video"),bm=0;bm<am.length;++bm)for(var cm=am[bm],dm=0;dm<cm.m.length;++dm){var em=cm.m[dm];if(em.M&&em.H){var fm=em.C,em=new ea(fm,em.bandwidth,em.width,em.height,em.id,em.fbQualityLabel,em.fbQualityClass);fm==yl&&(em.active=true);zl.push(em);}}return zl;};xk.prototype.getVideoTracks=xk.prototype.na;xk.prototype.ca=function(){if(!this.c.a.hasOwnProperty("audio"))return [];for(var yl=this.f.audio,yl=(yl=yl?yl.ma():null)?yl.C:0,zl=[],am=this.c.get("audio"),bm=0;bm<am.length;++bm)for(var cm=am[bm],dm=cm.lang,em=0;em<cm.m.length;++em){var fm=cm.m[em];if(fm.M&&fm.H){var gm=fm.C,fm=new u(gm,fm.bandwidth,dm,fm.id);gm==yl&&(fm.active=true);zl.push(fm);}}return zl;};xk.prototype.getAudioTracks=xk.prototype.ca;xk.prototype.Ya=function(){if(!this.c.a.hasOwnProperty("text"))return [];for(var yl=this.f.text,zl=yl?yl.ma():null,zl=zl?zl.C:0,am=[],bm=this.c.get("text"),cm=0;cm<bm.length;++cm)for(var dm=bm[cm],em=dm.lang,fm=0;fm<dm.m.length;++fm){var gm=dm.m[fm].C,hm=new da(gm,em);gm==zl&&(hm.active=true,hm.enabled=yl.za());am.push(hm);}return am;};xk.prototype.getTextTracks=xk.prototype.Ya;function cl(yl,zl){if(yl.D){for(var am={},bm=yl.a.a[0],cm=0;cm<bm.a.length;++cm){var dm=bm.a[cm];am[dm.C]=dm;}yl.c.a={};bm=nc(zl);for(cm=0;cm<bm.length;++cm){var dm=bm[cm],em=zl.get(dm);if("video"==dm){var fm=em[0].id;yl.c.push(dm,am[fm]);}else if("audio"==dm){for(var fm=em[0].b.split(";")[0],gm=0;gm<em.length;++gm){var hm=em[gm];hm.b.split(";")[0]==fm&&yl.c.push(dm,am[hm.id]);}}else for(gm=0;gm<em.length;++gm)fm=em[gm].id,yl.c.push(dm,am[fm]);}yl.ga=true;if(am=yl.c.get("audio"))il(yl,am),yl.c.set("audio",am),am=am[0].lang||yl.B,zb(2,yl.B,am)&&(yl.ga=false);if(am=yl.c.get("text"))il(yl,am),yl.c.set("text",am),am=am[0].lang||yl.B,zb(2,yl.B,am)||(yl.ga=false);}}xk.prototype.selectVideoTrack=function(yl,zl,am){return hl(this,"video",yl,zl,am);};function dl(yl,zl){var am=yl.f.text;am&&am.ra(zl);}function el(yl){if(yl.h){for(var zl=false,am=0;am<yl.a.a.length;++am)for(var bm=yl.a.a[am],cm=0;cm<bm.a.length;++cm){var dm=bm.a[cm];if("video"==dm.contentType)for(var em=0;em<dm.m.length;++em){var fm=dm.m[em],gm=fm.H;fm.H=true;yl.h.maxWidth&&fm.width>yl.h.maxWidth&&(fm.H=false);yl.h.maxHeight&&fm.height>yl.h.maxHeight&&(fm.H=false);yl.h.minHeight&&fm.height<yl.h.minHeight&&(fm.H=false);yl.h.maxBandwidth&&fm.bandwidth>yl.h.maxBandwidth&&(fm.H=false);yl.h.minBandwidth&&fm.bandwidth<yl.h.minBandwidth&&(fm.H=false);gm!=fm.H&&(zl=true);}}0!=lc(yl.c).length&&zl&&(gl(yl),0<yl.na().length||(zl=Error("The application has restricted all video tracks!"),zl.type="app",zl=yb(zl),yl.dispatchEvent(zl)));}}xk.prototype.$a=function(){return this.a?this.a.b:false;};xk.prototype.isLive=xk.prototype.$a;function fl(yl,zl){for(var am,bm=false,cm=new kc(),dm=lc(yl.c),em=0;em<dm.length;++em)for(var fm=dm[em],gm=0;gm<fm.m.length;++gm){var hm=fm.m[gm];hm.f.forEach(function(im){cm.push(im,hm);});}for(am in zl)if(dm=ub[zl[am]]||null,fm=cm.get(am)){for(em=0;em<fm.length;++em)hm=fm[em],gm=hm.M,hm.M=!dm,gm!=hm.M&&(bm=true);}else yc(am);bm&&(gl(yl),bm=yl.ca(),am=yl.na(),bm=yl.c.a.hasOwnProperty("audio")&&0==bm.length,am=yl.c.a.hasOwnProperty("video")&&0==am.length,bm||am)&&(am=Error("The key system has restricted all "+(bm&&am?"audio and video tracks.":bm?"audio tracks.":"video tracks.")),am.type="drm",am=yb(am),yl.dispatchEvent(am));}function gl(yl){var zl=xb({type:"trackschanged",bubbles:true});yl.dispatchEvent(zl);}function hl(yl,zl,am,bm,cm){if(!yl.c.a.hasOwnProperty(zl)||!yl.f[zl])return false;for(var dm=yl.c.get(zl),em=0;em<dm.length;++em)for(var fm=dm[em],gm=0;gm<fm.m.length;++gm){var hm=fm.m[gm];if(hm.C==am){if(!hm.M||!hm.H)return false;if("text"!=zl&&!yl.Ma)return am=yl.j[zl],yl.j[zl]={Ja:hm,Sa:null!=am&&am.Sa||bm,Ta:null!=am&&am.Ta||cm},true;sj(yl.K,hm);yl.f[zl].oa(hm,bm,cm);return true;}}return false;}function il(yl,zl){for(var am=0;2>=am;++am)for(var bm=0;bm<zl.length;++bm){var cm=zl[bm];if(zb(am,yl.B,cm.lang)){zl.splice(bm,1);zl.splice(0,0,cm);return;}}for(bm=0;bm<zl.length;++bm)if(cm=zl[bm],cm.b){zl.splice(bm,1);zl.splice(0,0,cm);break;}}j=xk.prototype;j.ub=function(){this.i.pa(this.g,"sourceopen");this.ab.resolve();};function jl(yl){for(var zl=[],am=["audio","video","text"],bm=0;bm<am.length;++bm){var cm=am[bm];yl.c.a.hasOwnProperty(cm)&&zl.push(yl.c.get(cm)[0]);}for(var dm=kl(yl,zl),bm=0;bm<am.length;++bm)if(cm=am[bm],yl.c.a.hasOwnProperty(cm)&&!dm[cm])return yl=Error("Unable to select an initial "+cm+" stream: all "+cm+" streams have been restricted (by the application or by the key system)."),yl.type="stream",Promise.reject(yl);zl=ec(dm).map(function(em){return em.I.create();});return Promise.all(zl).then(dd(yl,function(em){if(!em.every(function(fm){return fm.length();}))return em=Error("Some streams are not available."),em.type="stream",Promise.reject(em);em=ul(this,em);if(!em)return em=Error("Some streams are not available."),em.type="stream",Promise.reject(em);if(!ll(this,dm))return em=Error("Failed to create Stream objects."),em.type="stream",Promise.reject(em);this.o.start();nl(this,dm,em);return Promise.resolve();})).catch(dd(yl,function(em){if("aborted"!=em.type)return Object.keys(this.f),this.a.b?(eb()<this.a.i?(em=Math.max(this.a.i-Date.now()/1000,this.va),this.L=i.setTimeout(this.eb.bind(this,true),1000*em)):al(this,0),Promise.resolve()):Promise.reject(em);}));}function kl(yl,zl){for(var am={},bm=0;bm<zl.length;++bm){var cm=zl[bm],dm=null;if("video"==cm.contentType){var em=yl.o.getInitialVideoTrackId();if(null==em)continue;dm=cm.m.filter(function(fm){return fm.C==em;});if(0==dm.length)continue;dm=dm[0];}else if("audio"==cm.contentType){if(em=yl.o.getInitialAudioTrackId(),dm=cm.m.filter(function(fm){return fm.C==em;}),0==dm.length){dm=cm.m.filter(function(fm){return fm.M&&fm.H;});if(0==dm.length)continue;dm=cm.m[Math.floor(dm.length/2)];}else dm=dm[0];}else 0<cm.m.length&&(dm=cm.m[0]);am[cm.contentType]=dm;}return am;}function ll(yl,zl){var am={},bm;for(bm in zl){var cm=zl[bm],cm="text"==bm?new cj(yl,yl.b):ml(yl,cm);if(!cm)return ec(am).forEach(function(dm){dm.destroy();}),false;am[bm]=cm;}yl.f=am;return true;}function ml(yl,zl){var am=new ti(yl,yl.b,yl.g,mi(zl),yl.ea);am.B(yl.A);return am;}function nl(yl,zl,am){yl.$=yl.b.playbackRate;yl.b.playbackRate=0;pl(yl,am);var bm;yl.U&&yl.U<=am.end&&yl.U>=am.start?bm=yl.U:yl.a.b?(bm=am.end,yl.Pa=true):bm=am.start;pc(yl.i,yl.b,"seeking",yl.Bb.bind(yl));yl.b.currentTime!=bm&&(yl.b.currentTime=bm,yl.v=bm);ql(yl,am.start,am.end);var cm=[],dm;for(dm in yl.f)am=yl.f[dm],dd(yl,function(em){cm.push(em.jb(this.aa).then(dd(this,function(fm){var gm=em.Aa();gm>this.xa&&(this.xa=gm);return fm;})));})(am),pc(yl.i,am,"ended",yl.Cb.bind(yl)),bm=zl[dm],sj(yl.K,bm),am.oa(bm,false);Promise.all(cm).then(yl.qb.bind(yl)).catch(dd(yl,function(em){"destroy"!=em.type&&(em=yb(em),this.dispatchEvent(em));}));dl(yl,yl.ga);}j.qb=function(yl){n(yl&&yl.length==Object.keys(this.f).length);for(var zl=Number.POSITIVE_INFINITY,am=Number.NEGATIVE_INFINITY,bm=0;bm<yl.length;++bm)var cm=yl[bm],zl=Math.min(zl,cm),am=Math.max(am,cm);yl=tl(this);for(bm=0;bm<yl.length;++bm)yl[bm].ka(am);ol(this,yl,am);bm=lc(this.c).map(function(dm){return dm.m;}).reduce(function(dm,em){return dm.concat(em);},[]).map(function(dm){var em=[dm.I.create()];dm.J&&em.push(dm.J.create());return Promise.all(em);});Promise.all(bm).then(dd(this,function(dm){for(var em=0;em<dm.length;++em)dm[em][0].ka(am);this.Ma=true;for(var fm in this.j)dm=this.j[fm],em=this.f[fm],sj(this.K,dm.Ja),em.oa(dm.Ja,dm.Sa,dm.Ta);this.j={};})).catch(dd(this,function(dm){"aborted"!=dm.type&&(dm=yb(dm),this.dispatchEvent(dm));}));};function ol(yl,zl,am){if(zl=ul(yl,zl))pl(yl,zl),ql(yl,zl.start,zl.end);0!=am&&(am=yl.b.currentTime+am,yl.b.currentTime=am,yl.v=am);yl.Pa&&zl&&(yl.b.currentTime=zl.end);yl.b.playbackRate=yl.$;yl.a.b&&null!=yl.a.f&&al(yl,0);vl(yl);yl.aa.resolve();}function pl(yl,zl){if(yl.a.b){isNaN(yl.g.duration)&&(yl.g.duration=zl.end+2592000);}else if(isNaN(yl.g.duration)||zl.end>yl.g.duration){yl.g.duration=zl.end;for(var am=0;am<yl.g.sourceBuffers.length;++am)yl.g.sourceBuffers[am].appendWindowEnd=zl.end;}}j.Db=function(){this.T=null;vl(this);var yl=ul(this,tl(this));yl&&(this.a.b&&this.Y!=yl.w&&(this.Y=yl.w,null!=this.l&&(i.clearTimeout(this.l),this.l=null)),ql(this,yl.start,yl.end),this.b.paused||rl(this,this.b.currentTime,yl.start,yl.end));};function ql(yl,zl,am){zl=xb({type:"seekrangechanged",bubbles:true,start:zl,end:am});yl.dispatchEvent(zl);}j.Bb=function(){var yl=this.b.currentTime;if(null!=this.v){if(yl>=this.v-.01&&yl<=this.v+.01){this.v=null;return;}this.v=null;}var zl=ul(this,tl(this));if(zl){var am=zl.end;(zl=rl(this,yl,zl.start,am))||(yl<=am+.01?zl=false:(this.b.currentTime=am,zl=true));if(!zl)for(var bm in this.f)this.f[bm].gb();}};function rl(yl,zl,am,bm){if(zl>=am-.01)return false;zl=0;if(yl.a.b){zl=.5;for(var cm in yl.f)if(!yl.f[cm].hb(am+zl)){zl=yl.a.c;break;}}yl.b.currentTime=Math.min(am+zl,bm);return true;}j.Cb=function(){if(!this.a.b){for(var yl in this.f)if(!this.f[yl].Da())return;this.qa();}};j.sb=function(){this.da=true;if(this.a.h&&this.b.currentTime+.5>this.Y)return this.qa();ec(this.f).every(function(yl){return yl.Da();})&&(this.l=i.setTimeout(this.qa.bind(this),1000*this.Ua));};j.rb=function(){this.da=false;null!=this.l&&(i.clearTimeout(this.l),this.l=null);};j.Mb=function(){var yl=this.K,zl=this.ea.getBandwidth();yl.estimatedBandwidth=zl;yl.bandwidthHistory.push(new uj(zl));};function sl(yl){if(yl.fa){yl.fa=false;yl.b.playbackRate=yl.$;var zl=xb({type:"streamresumed",bubbles:true});yl.dispatchEvent(zl);}}j.qa=function(){this.da=false;sl(this);this.l=null;this.g.endOfStream();};function tl(yl){return ec(yl.f).map(function(zl){return zl.Za();}).filter(function(zl){return null!=zl;});}function ul(yl,zl){for(var am=0,bm=Number.POSITIVE_INFINITY,cm=Number.POSITIVE_INFINITY,dm=0;dm<zl.length;++dm){var em=zl[dm].Ba(),am=Math.max(am,em.start);null!=em.end&&(bm=Math.min(bm,em.end));zl[dm].length()&&(cm=Math.min(cm,zl[dm].w().a));}if(bm==Number.POSITIVE_INFINITY)if(bm=yl.a.a[0],bm.b){bm=(bm.start||0)+bm.b;}else return null;yl.a.b&&(bm=Math.max(bm-yl.a.c,am));if(am>bm)return null;bm=Math.floor(100000*bm)/100000;return {start:am,end:bm,w:cm};}function vl(yl){yl.a.b&&(yl.T=i.setTimeout(yl.Db.bind(yl),1000));}function wl(yl){for(var zl in yl.f)yl.f[zl].B(yl.A);}j.Aa=function(){return this.xa;};xk.prototype.getLongestInitResponseTime=xk.prototype.Aa;function xl(yl,zl,am,bm){am||(am=new uc());bm||(bm=new vk());xk.call(this,null,am,bm);"string"===typeof yl?this.mb=yl:this.Va=yl;this.Z=null;this.ba=zl;this.ta=[];this.Na=[];this.Oa=[];this.F=null;}m(xl,xk);l("shaka.player.DashVideoSource",xl);xl.prototype.nb=function(yl,zl,am){this.ta.push(yl);this.Na.push(zl||"");this.Oa.push(am||"");};xl.prototype.addExternalCaptions=xl.prototype.nb;xl.prototype.ob=function(yl){this.F=yl;};xl.prototype.setNetworkCallback=xl.prototype.ob;xl.prototype.destroy=function(){this.Z=this.F=this.ba=null;xk.prototype.destroy.call(this);};xl.prototype.Ia=function(){var yl=dd(this,function(am){this.Z=am;for(var bm=0;bm<this.ta.length;bm++){var cm=am,dm=this.ta[bm],em=this.Na[bm],fm=this.Oa[bm];if(0!==cm.a.length){var gm=new qf();gm.contentType="text";gm.lang=em||"en";gm.c=true;em=new tf();em.bandwidth=0;em.f=fm||"text/vtt";em.s=[new ye(dm)];gm.a.push(em);cm.a[0].b.push(gm);hg(cm.a[0]);}}this.a=gj(new fj(this.ba),am,this.F);return xk.prototype.Ia.call(this);});if(this.Va)return yl(this.Va);var zl=[new ye(this.mb)],zl=new gh(this.F,zl);return mh(new lh(zl,this.wa)).then(yl);};xl.prototype.cb=function(yl){return mh(new lh(yl,this.wa)).then(dd(this,function(zl){this.Z=zl;zl=gj(new fj(this.ba),zl,this.F);return Promise.resolve(zl);}));};xl.prototype.bb=function(){var yl=gj(new fj(this.ba),this.Z,this.F);return Promise.resolve(yl);};}.bind(h,b))();f.exports=h.shaka;},null);
__d('CustomAbrManager',['EventListener','SubscriptionsHandler','Shaka','VideoPlayerShakaExperiments'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('Shaka').player.VideoTrack;i.FIRST_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').firstSwitchInterval||4000;i.MIN_SWITCH_INTERVAL=c('VideoPlayerShakaExperiments').minSwitchInterval||30000;i.MIN_EVAL_INTERVAL=c('VideoPlayerShakaExperiments').minEvalInterval||3000;i.BANDWIDTH_UPGRADE_TARGET=c('VideoPlayerShakaExperiments').bandwidthUpgradeTarget||.85;i.BANDWIDTH_DOWNGRADE_TARGET=c('VideoPlayerShakaExperiments').bandwidthDowngradeTarget||.95;function i(j){'use strict';this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager3=new (c('SubscriptionsHandler'))();this.$CustomAbrManager4=Number.POSITIVE_INFINITY;this.$CustomAbrManager5=true;this.$CustomAbrManager6=false;this.$CustomAbrManager7=j.maxWidth;this.$CustomAbrManager8=j.maxHeight;this.$CustomAbrManager9=j.forceHighQualityDefault;this.$CustomAbrManager10=j.initiallyForcedRepresentations;this.$CustomAbrManager11=null;}i.prototype.destroy=function(){'use strict';this.$CustomAbrManager3.release();this.$CustomAbrManager3.engage();this.$CustomAbrManager1=null;this.$CustomAbrManager2=null;this.$CustomAbrManager5=false;};i.prototype.setResolutionConstraint=function(j,k){'use strict';this.$CustomAbrManager7=j;this.$CustomAbrManager8=k;this.$CustomAbrManager12();};i.prototype.initialize=function(j,k){'use strict';if(this.$CustomAbrManager1||this.$CustomAbrManager2)return;this.$CustomAbrManager1=j;this.$CustomAbrManager2=k;};i.prototype.start=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2||this.$CustomAbrManager6)return;this.$CustomAbrManager4=Date.now()+i.FIRST_SWITCH_INTERVAL;this.$CustomAbrManager3.addSubscriptions(c('EventListener').listen(this.$CustomAbrManager1,'bandwidth',this.$CustomAbrManager13.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'adaptation',this.$CustomAbrManager14.bind(this)),c('EventListener').listen(this.$CustomAbrManager2,'trackschanged',this.$CustomAbrManager15.bind(this)));this.$CustomAbrManager6=true;};i.prototype.$CustomAbrManager15=function(){'use strict';this.$CustomAbrManager12();};i.prototype.forceHighQuality=function(j){'use strict';this.$CustomAbrManager9=j;if(!this.$CustomAbrManager6)return;if(j){var k=this.$CustomAbrManager16();if(k)this.selectVideoTrack(k,true);}else this.$CustomAbrManager12();};i.prototype.setPreferredVideoTrack=function(j){'use strict';var k=i.$CustomAbrManager17(this.$CustomAbrManager2.getVideoTracks()),l=k?h.compare(k,j)<0:false;this.$CustomAbrManager11=j;this.$CustomAbrManager12(null,l);};i.prototype.unsetPreferredVideoTrack=function(){'use strict';this.$CustomAbrManager11=null;this.$CustomAbrManager12(null,false);};i.prototype.enable=function(j){'use strict';this.$CustomAbrManager5=j;};i.prototype.getInitialVideoTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager16();return j?j.id:null;};i.prototype.getInitialAudioTrackId=function(){'use strict';if(!this.$CustomAbrManager1||!this.$CustomAbrManager2)return null;var j=this.$CustomAbrManager18();return j?j.id:null;};i.prototype.selectVideoTrack=function(j,k,l){'use strict';if(!this.$CustomAbrManager6)return;this.$CustomAbrManager2.selectVideoTrack(j.id,k,l);};i.$CustomAbrManager17=function(j){'use strict';for(var k=0;k<j.length;++k)if(j[k].active)return j[k];return null;};i.prototype.$CustomAbrManager13=function(event){'use strict';if(Date.now()<this.$CustomAbrManager4)return;this.$CustomAbrManager12(event);};i.prototype.$CustomAbrManager12=function(event,j){'use strict';if(!this.$CustomAbrManager5)return;var k=this.$CustomAbrManager16();if(k){if(k.active){this.$CustomAbrManager4=Date.now()+i.MIN_EVAL_INTERVAL;return;}this.selectVideoTrack(k,!!j);}this.$CustomAbrManager4=Number.POSITIVE_INFINITY;};i.prototype.$CustomAbrManager14=function(event){'use strict';if(this.$CustomAbrManager4==Number.POSITIVE_INFINITY)this.$CustomAbrManager4=Date.now()+i.MIN_SWITCH_INTERVAL;};i.prototype.$CustomAbrManager16=function(){'use strict';var j=this.$CustomAbrManager2.getVideoTracks();if(j.length==0)return null;if(!this.$CustomAbrManager6)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager10&&this.$CustomAbrManager10.includes(j[k].streamInfoID))return j[k];if(this.$CustomAbrManager11){var l=j.find(function(w){return w.id===this.$CustomAbrManager11.id;}.bind(this));if(l)return l;}j.sort(h.compare);if(this.$CustomAbrManager9)return j.pop();var m=j[0],n=this.$CustomAbrManager8,o=this.$CustomAbrManager7;j=j.filter(function(w){return w.width<=o||w.height<=n;});var p=i.$CustomAbrManager17(this.$CustomAbrManager2.getAudioTracks()),q=p?p.bandwidth:0,r=this.$CustomAbrManager1.getBandwidth();for(var k=0;k<j.length;k++){var s=j[k],t=k+1<j.length?j[k+1]:{bandwidth:Number.POSITIVE_INFINITY};if(!s.bandwidth)continue;var u=(s.bandwidth+q)/i.BANDWIDTH_DOWNGRADE_TARGET,v=(t.bandwidth+q)/i.BANDWIDTH_UPGRADE_TARGET;if(r>=u&&r<=v){m=s;if(m.active)break;}}return m;};i.prototype.$CustomAbrManager18=function(){'use strict';var j=this.$CustomAbrManager2.getAudioTracks();if(j.length==0)return null;if(!this.$CustomAbrManager6)for(var k=0;k<j.length;k++)if(this.$CustomAbrManager10&&this.$CustomAbrManager10.includes(j[k].streamInfoID))return j[k];return null;};f.exports=i;},null);
__d('VideoPlayerHTML5Shaka',['invariant','BlobFactory','CacheStorage','CustomAbrManager','EventEmitter','EventListener','Event','Run','VideoDashPrefetchCache','VideoPlayerShakaExperiments','dispatchEvent','Shaka'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('Shaka').player,l=k.Player,m=k.DashVideoSource,n=k.VideoTrack,o=c('Shaka').dash.mpd.parseMpd,p=c('Shaka').util,q=p.EWMACacheBandwidthEstimator,r=p.EWMASignedURLBandwidthEstimator,s=p.FailoverUri,t=window.devicePixelRatio||1,u=new (c('CacheStorage'))('localstorage','_video_'),v=c('VideoPlayerShakaExperiments').enableAdaptation?new q(c('VideoPlayerShakaExperiments').cacheDelay,c('VideoPlayerShakaExperiments').cacheBandwidth,c('VideoPlayerShakaExperiments').useStoredBandwidthEstimate?u.get('bandwidthEstimate'):undefined):new r();s.setPrefetchCacheValueGetter(c('VideoDashPrefetchCache').getCacheValue);c('Run').onUnload(function(){return u.set('bandwidthEstimate',v.getBandwidth());});c('Shaka').polyfill.Fullscreen.install();function w(ca){var da=ca.getVideoTracks();da.sort(n.compare);return da.pop().id;}function x(ca){var da=ca.getVideoTracks();da.sort(n.compare);return da.shift().id;}function y(ca){var da=c('BlobFactory').getBlob([ca]);return URL.createObjectURL(da);}function z(ca,event){var da=c('EventListener').capture(ca.parentNode,event,function(ea){if(ea.target!=ca)return;da.remove();c('Event').kill(ea);});}function aa(ca,da){'use strict';this.$DisabledAbrManager1=ca;this.$DisabledAbrManager2=da;}aa.prototype.initialize=function(ca,da){'use strict';this.$DisabledAbrManager3=da;};aa.prototype.start=function(){'use strict';if(this.$DisabledAbrManager4)return;this.$DisabledAbrManager4=true;if(this.$DisabledAbrManager2&&this.$DisabledAbrManager1)this.$DisabledAbrManager3.selectVideoTrack(w(this.$DisabledAbrManager3),false);};aa.prototype.enable=function(){'use strict';};aa.prototype.getInitialVideoTrackId=function(){'use strict';if(this.$DisabledAbrManager2)return x(this.$DisabledAbrManager3);var ca=this.$DisabledAbrManager1?w(this.$DisabledAbrManager3):x(this.$DisabledAbrManager3);return ca;};aa.prototype.setPreferredVideoTrack=function(ca){'use strict';if(this.$DisabledAbrManager4)this.$DisabledAbrManager3.selectVideoTrack(ca.id,true);};aa.prototype.unsetPreferredVideoTrack=function(){'use strict';};aa.prototype.destroy=function(){'use strict';this.$DisabledAbrManager3=null;};i=babelHelpers.inherits(ba,c('EventEmitter'));j=i&&i.prototype;function ba(ca,da,ea){var fa=ea.width,ga=ea.height,ha=ea.manifest,ia=ea.manifestUrl,ja=ea.playHighQualityTrack;'use strict';j.constructor.call(this);this.$VideoPlayerHTML5Shaka1=ja;this.$VideoPlayerHTML5Shaka2=false;this.$VideoPlayerHTML5Shaka3=false;this.$VideoPlayerHTML5Shaka4=fa;this.$VideoPlayerHTML5Shaka5=ga;this.$VideoPlayerHTML5Shaka6=true;var ka=c('EventListener').listen(ca,'playing',function(){this.$VideoPlayerHTML5Shaka6=false;ka.remove();}.bind(this));this.$VideoPlayerHTML5Shaka7=null;this.$VideoPlayerHTML5Shaka8=null;this.$VideoPlayerHTML5Shaka9=new l(ca);this.$VideoPlayerHTML5Shaka9.addEventListener('bufferingStart',function(){return this.$VideoPlayerHTML5Shaka10();}.bind(this));this.$VideoPlayerHTML5Shaka9.addEventListener('bufferingEnd',function(){return this.$VideoPlayerHTML5Shaka11();}.bind(this));this.$VideoPlayerHTML5Shaka9.addEventListener('error',function(la){return this.$VideoPlayerHTML5Shaka12(la);}.bind(this));this.$VideoPlayerHTML5Shaka9.addEventListener('adaptation',this.$VideoPlayerHTML5Shaka13.bind(this));this.$VideoPlayerHTML5Shaka9.addEventListener('trackschanged',this.$VideoPlayerHTML5Shaka14.bind(this));this.$VideoPlayerHTML5Shaka9.addEventListener('streaminterrupted',this.$VideoPlayerHTML5Shaka15.bind(this));this.$VideoPlayerHTML5Shaka9.addEventListener('streamresumed',this.$VideoPlayerHTML5Shaka16.bind(this));this.$VideoPlayerHTML5Shaka17=da;if(ha){this.$VideoPlayerHTML5Shaka18=o(ha);}else this.$VideoPlayerHTML5Shaka18=ia;this.$VideoPlayerHTML5Shaka19=this.$VideoPlayerHTML5Shaka20();this.$VideoPlayerHTML5Shaka21=this.$VideoPlayerHTML5Shaka22();this.$VideoPlayerHTML5Shaka23=ca;this.$VideoPlayerHTML5Shaka9.configure({enableAdaptation:c('VideoPlayerShakaExperiments').enableAdaptation,streamBufferSize:c('VideoPlayerShakaExperiments').streamBufferSize,initialStreamBufferSize:c('VideoPlayerShakaExperiments').initialStreamBufferSize,minMpdRefreshInterval:c('VideoPlayerShakaExperiments').minMpdRefreshInterval,disableCacheBustingEvenThoughItMayAffectBandwidthEstimation:true,liveStreamEndTimeout:c('VideoPlayerShakaExperiments').liveStreamEndTimeout/1000,enableLiveInterruptionDetection:c('VideoPlayerShakaExperiments').enableLiveInterruptionDetection,liveInterruptionConsecutiveUpdatesWithoutChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithoutChange,liveInterruptionConsecutiveUpdatesWithChange:c('VideoPlayerShakaExperiments').liveInterruptionConsecutiveUpdatesWithChange});this.$VideoPlayerHTML5Shaka9.load(this.$VideoPlayerHTML5Shaka21);}ba.prototype.selectHighestQualityTrack=function(){'use strict';if(c('VideoPlayerShakaExperiments').enableAdaptation){this.$VideoPlayerHTML5Shaka1=true;this.$VideoPlayerHTML5Shaka19.forceHighQuality(true);return;}this.$VideoPlayerHTML5Shaka9.selectVideoTrack(w(this.$VideoPlayerHTML5Shaka9),true);};ba.prototype.selectLowestQualityTrack=function(){'use strict';if(c('VideoPlayerShakaExperiments').enableAdaptation){this.$VideoPlayerHTML5Shaka1=false;this.$VideoPlayerHTML5Shaka19.forceHighQuality(false);return;}this.$VideoPlayerHTML5Shaka9.selectVideoTrack(x(this.$VideoPlayerHTML5Shaka9),false);};ba.prototype.getAvailableVideoQualities=function(){'use strict';if(this.$VideoPlayerHTML5Shaka2)return this.$VideoPlayerHTML5Shaka7;var ca=this.$VideoPlayerHTML5Shaka21.getVideoTracks();ca.sort(n.compare);return ca.map(function(da){return da.fbQualityLabel;});};ba.prototype.getSelectedVideoQuality=function(){'use strict';if(this.$VideoPlayerHTML5Shaka2)return this.$VideoPlayerHTML5Shaka8;var ca=this.$VideoPlayerHTML5Shaka21.getVideoTracks(),da=ca.find(function(ea){return ea.active;});return da?da.fbQualityLabel:null;};ba.prototype.canAutoSelectVideoQuality=function(){'use strict';return c('VideoPlayerShakaExperiments').enableAdaptation;};ba.prototype.setPreferredVideoQuality=function(ca){'use strict';var da=this.$VideoPlayerHTML5Shaka21.getVideoTracks().find(function(ea){return ca==ea.fbQualityLabel;});if(da)this.$VideoPlayerHTML5Shaka19.setPreferredVideoTrack(da);};ba.prototype.unsetPreferredVideoQuality=function(){'use strict';this.$VideoPlayerHTML5Shaka19.unsetPreferredVideoTrack();};ba.prototype.pause=function(){'use strict';if(this.$VideoPlayerHTML5Shaka24){this.$VideoPlayerHTML5Shaka25=true;this.$VideoPlayerHTML5Shaka26=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka23,'pause');this.$VideoPlayerHTML5Shaka9.setResumeAfterBuffering(false);}else this.$VideoPlayerHTML5Shaka23.pause();};ba.prototype.play=function(){'use strict';if(this.$VideoPlayerHTML5Shaka24){this.$VideoPlayerHTML5Shaka25=false;this.$VideoPlayerHTML5Shaka26=true;c('dispatchEvent')(this.$VideoPlayerHTML5Shaka23,'play');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka23,'waiting');this.$VideoPlayerHTML5Shaka9.setResumeAfterBuffering(true);}else this.$VideoPlayerHTML5Shaka23.play();};ba.prototype.$VideoPlayerHTML5Shaka10=function(){'use strict';z(this.$VideoPlayerHTML5Shaka23,'pause');this.$VideoPlayerHTML5Shaka24=true;this.$VideoPlayerHTML5Shaka25=false;this.$VideoPlayerHTML5Shaka26=false;this.$VideoPlayerHTML5Shaka9.setResumeAfterBuffering(true);this.emit('bufferingStart');};ba.prototype.$VideoPlayerHTML5Shaka11=function(){var ca=this;'use strict';if(!this.$VideoPlayerHTML5Shaka25)z(this.$VideoPlayerHTML5Shaka23,'play');if(!this.$VideoPlayerHTML5Shaka26)(function(){var da=c('EventListener').capture(ca.$VideoPlayerHTML5Shaka23.parentNode,'playing',function(ea){if(ea.target!=this.$VideoPlayerHTML5Shaka23)return;da.remove();if(this.$VideoPlayerHTML5Shaka6){this.$VideoPlayerHTML5Shaka6=false;return;}c('Event').kill(ea);}.bind(ca));})();this.$VideoPlayerHTML5Shaka24=false;this.emit('bufferingEnd');};ba.prototype.$VideoPlayerHTML5Shaka12=function(ca){'use strict';var da=ca.detail||{},ea=da.type||'undefined';if(this.$VideoPlayerHTML5Shaka3&&this.$VideoPlayerHTML5Shaka2&&ea=='net')return;this.emit('error',{error:'SHAKA_'+ea.toUpperCase(),message:da.message,httpStatus:da.status||null,url:da.url||null});};ba.prototype.hasSelectableVideoTracks=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka9.getVideoTracks();return ca.length>1;};ba.prototype.unload=function(){'use strict';this.$VideoPlayerHTML5Shaka8=this.getSelectedVideoQuality();this.$VideoPlayerHTML5Shaka7=this.getAvailableVideoQualities();this.$VideoPlayerHTML5Shaka3=this.$VideoPlayerHTML5Shaka21&&this.$VideoPlayerHTML5Shaka21.isLive();this.$VideoPlayerHTML5Shaka9.unload();this.$VideoPlayerHTML5Shaka2=true;};ba.prototype.$VideoPlayerHTML5Shaka20=function(){'use strict';var ca=this.$VideoPlayerHTML5Shaka1,da={forceHighQualityDefault:ca,maxWidth:this.$VideoPlayerHTML5Shaka27(),maxHeight:this.$VideoPlayerHTML5Shaka28(),initiallyForcedRepresentations:this.$VideoPlayerHTML5Shaka17};return c('VideoPlayerShakaExperiments').enableAdaptation?new (c('CustomAbrManager'))(da):new aa(ca,c('VideoPlayerShakaExperiments').switchFromLowQuality);};ba.prototype.$VideoPlayerHTML5Shaka22=function(){'use strict';!this.$VideoPlayerHTML5Shaka19?h(0):void 0;!this.$VideoPlayerHTML5Shaka18?h(0):void 0;var ca=new m(this.$VideoPlayerHTML5Shaka18,null,v,this.$VideoPlayerHTML5Shaka19);return ca;};ba.prototype.reload=function(ca){'use strict';if(!this.$VideoPlayerHTML5Shaka2)return;this.$VideoPlayerHTML5Shaka19=this.$VideoPlayerHTML5Shaka20();this.$VideoPlayerHTML5Shaka21=this.$VideoPlayerHTML5Shaka22();this.$VideoPlayerHTML5Shaka9.setPlaybackStartTime(ca);return this.$VideoPlayerHTML5Shaka9.load(this.$VideoPlayerHTML5Shaka21).then(function(){if(this.$VideoPlayerHTML5Shaka3!=this.$VideoPlayerHTML5Shaka21.isLive())return this.$VideoPlayerHTML5Shaka29();this.setPreferredVideoQuality(this.$VideoPlayerHTML5Shaka8);this.$VideoPlayerHTML5Shaka8=null;this.$VideoPlayerHTML5Shaka30=null;this.$VideoPlayerHTML5Shaka2=false;}.bind(this))['catch'](function(da){if(this.$VideoPlayerHTML5Shaka3)return this.$VideoPlayerHTML5Shaka29();}.bind(this));};ba.prototype.$VideoPlayerHTML5Shaka29=function(){'use strict';c('dispatchEvent')(this.$VideoPlayerHTML5Shaka23,'seeked');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka23,'playing');c('dispatchEvent')(this.$VideoPlayerHTML5Shaka23,'ended');this.unload();};ba.prototype.getLongestInitResponseTime=function(){'use strict';return this.$VideoPlayerHTML5Shaka21.getLongestInitResponseTime();};ba.$VideoPlayerHTML5Shaka31=function(){'use strict';return (c('VideoPlayerShakaExperiments').resolutionConstraintFactor*t);};ba.prototype.$VideoPlayerHTML5Shaka27=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka4*ba.$VideoPlayerHTML5Shaka31();};ba.prototype.$VideoPlayerHTML5Shaka28=function(){'use strict';if(!c('VideoPlayerShakaExperiments').useResolutionConstraints)return Infinity;return this.$VideoPlayerHTML5Shaka5*ba.$VideoPlayerHTML5Shaka31();};ba.prototype.setDimensions=function(ca,da){'use strict';this.$VideoPlayerHTML5Shaka4=ca;this.$VideoPlayerHTML5Shaka5=da;this.$VideoPlayerHTML5Shaka19.setResolutionConstraint(this.$VideoPlayerHTML5Shaka27(),this.$VideoPlayerHTML5Shaka28());};ba.isSupported=function(){'use strict';return l.isBrowserSupported();};ba.prototype.$VideoPlayerHTML5Shaka14=function(){'use strict';this.emit('tracksChanged');};ba.prototype.$VideoPlayerHTML5Shaka13=function(){'use strict';this.emit('adaptation');};ba.prototype.$VideoPlayerHTML5Shaka15=function(){'use strict';this.emit('streamInterrupted');};ba.prototype.$VideoPlayerHTML5Shaka16=function(){'use strict';this.emit('streamResumed');};f.exports=ba;},null);